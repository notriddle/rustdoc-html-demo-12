<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Machinery for hygienic macros."><title>rustc_span::hygiene - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-528d32ef.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rustc_span" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-e93015a6.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-1b37d467.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-c7770cbf.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module hygiene</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../rustc_span/index.html"><img class="rust-logo" src="../../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../../rustc_span/index.html">rustc_<wbr>span</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module hygiene</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate rustc_<wbr>span</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">rustc_span</a></div><h1>Module <span>hygiene</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/rustc_span/hygiene.rs.html#1-1560">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Machinery for hygienic macros.</p>
<p>Inspired by Matthew Flatt et al., “Macros That Work Together: Compile-Time Bindings, Partial
Expansion, and Definition Contexts,” <em>Journal of Functional Programming</em> 22, no. 2
(March 1, 2012): 181–216, <a href="https://doi.org/10.1017/S0956796812000093">https://doi.org/10.1017/S0956796812000093</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">Expn<wbr>Data</a></dt><dd>A subset of properties from both macro definition and macro call available through global data.
Avoid using this if you have access to the original definition or call structures.</dd><dt><a class="struct" href="struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">Expn<wbr>Hash</a></dt><dd>A unique hash value associated to an expansion.</dd><dt><a class="struct" href="struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a></dt><dd>A unique ID associated with a macro invocation and expansion.</dd><dt><a class="struct" href="struct.ExpnIndex.html" title="struct rustc_span::hygiene::ExpnIndex">Expn<wbr>Index</a></dt><dd>A unique ID associated with a macro invocation and expansion.</dd><dt><a class="struct" href="struct.HygieneData.html" title="struct rustc_span::hygiene::HygieneData">Hygiene<wbr>Data</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="struct" href="struct.HygieneDecodeContext.html" title="struct rustc_span::hygiene::HygieneDecodeContext">Hygiene<wbr>Decode<wbr>Context</a></dt><dd>Additional information used to assist in decoding hygiene data</dd><dt><a class="struct" href="struct.HygieneEncodeContext.html" title="struct rustc_span::hygiene::HygieneEncodeContext">Hygiene<wbr>Encode<wbr>Context</a></dt><dt><a class="struct" href="struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">Local<wbr>Expn<wbr>Id</a></dt><dd>A unique ID associated with a macro invocation and expansion.</dd><dt><a class="struct" href="struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">Syntax<wbr>Context</a></dt><dd>A <code>SyntaxContext</code> represents a chain of pairs <code>(ExpnId, Transparency)</code> named “marks”.</dd><dt><a class="struct" href="struct.SyntaxContextData.html" title="struct rustc_span::hygiene::SyntaxContextData">Syntax<wbr>Context<wbr>Data</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.AstPass.html" title="enum rustc_span::hygiene::AstPass">AstPass</a></dt><dd>The kind of AST transform.</dd><dt><a class="enum" href="enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">Desugaring<wbr>Kind</a></dt><dd>The kind of compiler desugaring.</dd><dt><a class="enum" href="enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">Expn<wbr>Kind</a></dt><dd>Expansion kind.</dd><dt><a class="enum" href="enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">Macro<wbr>Kind</a></dt><dd>The kind of macro invocation or definition.</dd><dt><a class="enum" href="enum.Transparency.html" title="enum rustc_span::hygiene::Transparency">Transparency</a></dt><dd>A property of a macro expansion that determines how identifiers
produced by that expansion are resolved.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.assert_default_hashing_controls.html" title="fn rustc_span::hygiene::assert_default_hashing_controls">assert_<wbr>default_<wbr>hashing_<wbr>controls</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Assert that the provided <code>HashStableContext</code> is configured with the ‘default’
<code>HashingControls</code>. We should always have bailed out before getting to here
with a non-default mode. With this check in place, we can avoid the need
to maintain separate versions of <code>ExpnData</code> hashes for each permutation
of <code>HashingControls</code> settings.</dd><dt><a class="fn" href="fn.debug_hygiene_data.html" title="fn rustc_span::hygiene::debug_hygiene_data">debug_<wbr>hygiene_<wbr>data</a></dt><dt><a class="fn" href="fn.decode_expn_id.html" title="fn rustc_span::hygiene::decode_expn_id">decode_<wbr>expn_<wbr>id</a></dt><dd>Decode an expansion from the metadata of a foreign crate.</dd><dt><a class="fn" href="fn.decode_syntax_context.html" title="fn rustc_span::hygiene::decode_syntax_context">decode_<wbr>syntax_<wbr>context</a></dt><dt><a class="fn" href="fn.raw_encode_syntax_context.html" title="fn rustc_span::hygiene::raw_encode_syntax_context">raw_<wbr>encode_<wbr>syntax_<wbr>context</a></dt><dt><a class="fn" href="fn.register_expn_id.html" title="fn rustc_span::hygiene::register_expn_id">register_<wbr>expn_<wbr>id</a></dt><dd>Register an expansion which has been decoded from the metadata of a foreign crate.</dd><dt><a class="fn" href="fn.register_local_expn_id.html" title="fn rustc_span::hygiene::register_local_expn_id">register_<wbr>local_<wbr>expn_<wbr>id</a></dt><dd>Register an expansion which has been decoded from the on-disk-cache for the local crate.</dd><dt><a class="fn" href="fn.update_disambiguator.html" title="fn rustc_span::hygiene::update_disambiguator">update_<wbr>disambiguator</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Updates the <code>disambiguator</code> field of the corresponding <code>ExpnData</code>
such that the <code>Fingerprint</code> of the <code>ExpnData</code> does not collide with
any other <code>ExpnIds</code>.</dd><dt><a class="fn" href="fn.update_dollar_crate_names.html" title="fn rustc_span::hygiene::update_dollar_crate_names">update_<wbr>dollar_<wbr>crate_<wbr>names</a></dt><dt><a class="fn" href="fn.walk_chain.html" title="fn rustc_span::hygiene::walk_chain">walk_<wbr>chain</a></dt><dt><a class="fn" href="fn.walk_chain_collapsed.html" title="fn rustc_span::hygiene::walk_chain_collapsed">walk_<wbr>chain_<wbr>collapsed</a></dt><dd>In order to have good line stepping behavior in debugger, for the given span we return its
outermost macro call site that still has a <code>#[collapse_debuginfo(yes)]</code> property on it.
We also stop walking call sites at the function body level because no line stepping can occur
at the level above that.
The returned span can then be used in emitted debuginfo.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.SyntaxContextKey.html" title="type rustc_span::hygiene::SyntaxContextKey">Syntax<wbr>Context<wbr>Key</a></dt><dd>If this part of two syntax contexts is equal, then the whole syntax contexts should be equal.
The other fields are only for caching.</dd></dl></section></div></main></body></html>