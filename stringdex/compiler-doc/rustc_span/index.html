<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source positions and related helper functions."><title>rustc_span - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-b5d4dc93.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rustc_span" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-1a4373a8.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-1b37d467.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c7770cbf.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate rustc_span</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../rustc_span/index.html">rustc_<wbr>span</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#note" title="Note">Note</a></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>rustc_<wbr>span</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/rustc_span/lib.rs.html#1-2754">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Source positions and related helper functions.</p>
<p>Important concepts in this module include:</p>
<ul>
<li>the <em>span</em>, represented by <a href="struct.SpanData.html" title="struct rustc_span::SpanData"><code>SpanData</code></a> and related types;</li>
<li>source code as represented by a <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>; and</li>
<li>interned strings, represented by <a href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol"><code>Symbol</code></a>s, with some common symbols available statically
in the <a href="symbol/sym/index.html" title="mod rustc_span::symbol::sym"><code>sym</code></a> module.</li>
</ul>
<p>Unlike most compilers, the span contains not only the position in the source code, but also
various other metadata, such as the edition and macro hygiene. This metadata is stored in
<a href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext"><code>SyntaxContext</code></a> and <a href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData"><code>ExpnData</code></a>.</p>
<h3 id="note"><a class="doc-anchor" href="#note">§</a>Note</h3>
<p>This API is completely unstable and subject to change.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.DesugaringKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">DesugaringKind</a>;</code></dt><dt id="reexport.ExpnData"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">ExpnData</a>;</code></dt><dt id="reexport.ExpnHash"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">ExpnHash</a>;</code></dt><dt id="reexport.ExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a>;</code></dt><dt id="reexport.ExpnKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">ExpnKind</a>;</code></dt><dt id="reexport.LocalExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">LocalExpnId</a>;</code></dt><dt id="reexport.MacroKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">MacroKind</a>;</code></dt><dt id="reexport.SyntaxContext"><code>pub use hygiene::<a class="struct" href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">SyntaxContext</a>;</code></dt><dt id="reexport.ByteSymbol"><code>pub use symbol::<a class="struct" href="symbol/struct.ByteSymbol.html" title="struct rustc_span::symbol::ByteSymbol">ByteSymbol</a>;</code></dt><dt id="reexport.Ident"><code>pub use symbol::<a class="struct" href="symbol/struct.Ident.html" title="struct rustc_span::symbol::Ident">Ident</a>;</code></dt><dt id="reexport.MacroRulesNormalizedIdent"><code>pub use symbol::<a class="struct" href="symbol/struct.MacroRulesNormalizedIdent.html" title="struct rustc_span::symbol::MacroRulesNormalizedIdent">MacroRulesNormalizedIdent</a>;</code></dt><dt id="reexport.Macros20NormalizedIdent"><code>pub use symbol::<a class="struct" href="symbol/struct.Macros20NormalizedIdent.html" title="struct rustc_span::symbol::Macros20NormalizedIdent">Macros20NormalizedIdent</a>;</code></dt><dt id="reexport.STDLIB_STABLE_CRATES"><code>pub use symbol::<a class="constant" href="symbol/constant.STDLIB_STABLE_CRATES.html" title="constant rustc_span::symbol::STDLIB_STABLE_CRATES">STDLIB_STABLE_CRATES</a>;</code></dt><dt id="reexport.Symbol"><code>pub use symbol::<a class="struct" href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>;</code></dt><dt id="reexport.kw"><code>pub use symbol::<a class="mod" href="symbol/kw/index.html" title="mod rustc_span::symbol::kw">kw</a>;</code></dt><dt id="reexport.sym"><code>pub use symbol::<a class="mod" href="symbol/sym/index.html" title="mod rustc_span::symbol::sym">sym</a>;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="analyze_source_file/index.html" title="mod rustc_span::analyze_source_file">analyze_<wbr>source_<wbr>file</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="caching_source_map_view/index.html" title="mod rustc_span::caching_source_map_view">caching_<wbr>source_<wbr>map_<wbr>view</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="def_id/index.html" title="mod rustc_span::def_id">def_id</a></dt><dt><a class="mod" href="edit_distance/index.html" title="mod rustc_span::edit_distance">edit_<wbr>distance</a></dt><dd>Edit distances.</dd><dt><a class="mod" href="edition/index.html" title="mod rustc_span::edition">edition</a></dt><dt><a class="mod" href="fatal_error/index.html" title="mod rustc_span::fatal_error">fatal_<wbr>error</a></dt><dt><a class="mod" href="hygiene/index.html" title="mod rustc_span::hygiene">hygiene</a></dt><dd>Machinery for hygienic macros.</dd><dt><a class="mod" href="profiling/index.html" title="mod rustc_span::profiling">profiling</a></dt><dt><a class="mod" href="source_map/index.html" title="mod rustc_span::source_map">source_<wbr>map</a></dt><dd>Types for tracking pieces of source code within a crate.</dd><dt><a class="mod" href="span_encoding/index.html" title="mod rustc_span::span_encoding">span_<wbr>encoding</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="symbol/index.html" title="mod rustc_span::symbol">symbol</a></dt><dd>An “interner” is a data structure that associates values with usize tags and
allows bidirectional lookup; i.e., given a value, one can easily find the
type, and vice versa.</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.impl_pos.html" title="macro rustc_span::impl_pos">impl_<wbr>pos</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.AttrId.html" title="struct rustc_span::AttrId">AttrId</a></dt><dt><a class="struct" href="struct.BytePos.html" title="struct rustc_span::BytePos">BytePos</a></dt><dd>A byte offset.</dd><dt><a class="struct" href="struct.CachingSourceMapView.html" title="struct rustc_span::CachingSourceMapView">Caching<wbr>Source<wbr>MapView</a></dt><dt><a class="struct" href="struct.CharPos.html" title="struct rustc_span::CharPos">CharPos</a></dt><dd>A character offset.</dd><dt><a class="struct" href="struct.DistinctSources.html" title="struct rustc_span::DistinctSources">Distinct<wbr>Sources</a></dt><dt><a class="struct" href="struct.ErrorGuaranteed.html" title="struct rustc_span::ErrorGuaranteed">Error<wbr>Guaranteed</a></dt><dd>Useful type to use with <code>Result&lt;&gt;</code> indicate that an error has already
been reported to the user, so no need to continue checking.</dd><dt><a class="struct" href="struct.FileLines.html" title="struct rustc_span::FileLines">File<wbr>Lines</a></dt><dt><a class="struct" href="struct.FileNameDisplay.html" title="struct rustc_span::FileNameDisplay">File<wbr>Name<wbr>Display</a></dt><dt><a class="struct" href="struct.InnerSpan.html" title="struct rustc_span::InnerSpan">Inner<wbr>Span</a></dt><dd>Range inside of a <code>Span</code> used for diagnostics when we only have access to relative positions.</dd><dt><a class="struct" href="struct.LineInfo.html" title="struct rustc_span::LineInfo">Line<wbr>Info</a></dt><dt><a class="struct" href="struct.Loc.html" title="struct rustc_span::Loc">Loc</a></dt><dd>A source code location used for error reporting.</dd><dt><a class="struct" href="struct.MalformedSourceMapPositions.html" title="struct rustc_span::MalformedSourceMapPositions">Malformed<wbr>Source<wbr>MapPositions</a></dt><dt><a class="struct" href="struct.MetavarSpansMap.html" title="struct rustc_span::MetavarSpansMap">Metavar<wbr>Spans<wbr>Map</a></dt><dt><a class="struct" href="struct.MultiByteChar.html" title="struct rustc_span::MultiByteChar">Multi<wbr>Byte<wbr>Char</a></dt><dd>Identifies an offset of a multi-byte character in a <code>SourceFile</code>.</dd><dt><a class="struct" href="struct.NormalizedPos.html" title="struct rustc_span::NormalizedPos">Normalized<wbr>Pos</a></dt><dd>Identifies an offset of a character that was normalized away from <code>SourceFile</code>.</dd><dt><a class="struct" href="struct.OffsetOverflowError.html" title="struct rustc_span::OffsetOverflowError">Offset<wbr>Overflow<wbr>Error</a></dt><dt><a class="struct" href="struct.RelativeBytePos.html" title="struct rustc_span::RelativeBytePos">Relative<wbr>Byte<wbr>Pos</a></dt><dd>A byte offset relative to file beginning.</dd><dt><a class="struct" href="struct.SessionGlobals.html" title="struct rustc_span::SessionGlobals">Session<wbr>Globals</a></dt><dd>Per-session global variables: this struct is stored in thread-local storage
in such a way that it is accessible without any kind of handle to all
threads within the compilation session, but is not accessible outside the
session.</dd><dt><a class="struct" href="struct.SourceFile.html" title="struct rustc_span::SourceFile">Source<wbr>File</a></dt><dd>A single source in the <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>.</dd><dt><a class="struct" href="struct.SourceFileAndBytePos.html" title="struct rustc_span::SourceFileAndBytePos">Source<wbr>File<wbr>AndByte<wbr>Pos</a></dt><dt><a class="struct" href="struct.SourceFileAndLine.html" title="struct rustc_span::SourceFileAndLine">Source<wbr>File<wbr>AndLine</a></dt><dt><a class="struct" href="struct.SourceFileDiffs.html" title="struct rustc_span::SourceFileDiffs">Source<wbr>File<wbr>Diffs</a></dt><dd>The source file lines in difference list form. This matches the form
used within metadata, which saves space by exploiting the fact that the
lines list is sorted and individual lines are usually not that long.</dd><dt><a class="struct" href="struct.SourceFileHash.html" title="struct rustc_span::SourceFileHash">Source<wbr>File<wbr>Hash</a></dt><dd>The hash of the on-disk source file used for debug info and cargo freshness checks.</dd><dt><a class="struct" href="struct.Span.html" title="struct rustc_span::Span">Span</a></dt><dd>A compressed span.</dd><dt><a class="struct" href="struct.SpanData.html" title="struct rustc_span::SpanData">Span<wbr>Data</a></dt><dd>Represents a span.</dd><dt><a class="struct" href="struct.StableSourceFileId.html" title="struct rustc_span::StableSourceFileId">Stable<wbr>Source<wbr>File<wbr>Id</a></dt><dd>This is a <a href="struct.SourceFile.html" title="struct rustc_span::SourceFile">SourceFile</a> identifier that is used to correlate source files between
subsequent compilation sessions (which is something we need to do during
incremental compilation).</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ExternalSource.html" title="enum rustc_span::ExternalSource">External<wbr>Source</a></dt><dt><a class="enum" href="enum.ExternalSourceKind.html" title="enum rustc_span::ExternalSourceKind">External<wbr>Source<wbr>Kind</a></dt><dd>The state of the lazy external source loading mechanism of a <code>SourceFile</code>.</dd><dt><a class="enum" href="enum.FileName.html" title="enum rustc_span::FileName">File<wbr>Name</a></dt><dd>Differentiates between real files and common virtual files.</dd><dt><a class="enum" href="enum.FileNameDisplayPreference.html" title="enum rustc_span::FileNameDisplayPreference">File<wbr>Name<wbr>Display<wbr>Preference</a></dt><dt><a class="enum" href="enum.FileNameEmbeddablePreference.html" title="enum rustc_span::FileNameEmbeddablePreference">File<wbr>Name<wbr>Embeddable<wbr>Preference</a></dt><dt><a class="enum" href="enum.RealFileName.html" title="enum rustc_span::RealFileName">Real<wbr>File<wbr>Name</a></dt><dt><a class="enum" href="enum.SourceFileHashAlgorithm.html" title="enum rustc_span::SourceFileHashAlgorithm">Source<wbr>File<wbr>Hash<wbr>Algorithm</a></dt><dt><a class="enum" href="enum.SourceFileLines.html" title="enum rustc_span::SourceFileLines">Source<wbr>File<wbr>Lines</a></dt><dt><a class="enum" href="enum.SpanLinesError.html" title="enum rustc_span::SpanLinesError">Span<wbr>Lines<wbr>Error</a></dt><dt><a class="enum" href="enum.SpanSnippetError.html" title="enum rustc_span::SpanSnippetError">Span<wbr>Snippet<wbr>Error</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.DUMMY_SP.html" title="constant rustc_span::DUMMY_SP">DUMMY_<wbr>SP</a></dt><dd>The dummy span has zero position, length, and context, and no parent.</dd></dl><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><dl class="item-table"><dt><a class="static" href="static.SESSION_GLOBALS.html" title="static rustc_span::SESSION_GLOBALS">SESSION_<wbr>GLOBALS</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="static" href="static.SPAN_TRACK.html" title="static rustc_span::SPAN_TRACK">SPAN_<wbr>TRACK</a></dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.HashStableContext.html" title="trait rustc_span::HashStableContext">Hash<wbr>Stable<wbr>Context</a></dt><dd>Requirements for a <code>StableHashingContext</code> to be used in this crate.</dd><dt><a class="trait" href="trait.Pos.html" title="trait rustc_span::Pos">Pos</a></dt><dt><a class="trait" href="trait.SpanDecoder.html" title="trait rustc_span::SpanDecoder">Span<wbr>Decoder</a></dt><dd>This trait is used to allow decoder specific encodings of certain types.
It is similar to rustc_type_ir’s TyDecoder.</dd><dt><a class="trait" href="trait.SpanEncoder.html" title="trait rustc_span::SpanEncoder">Span<wbr>Encoder</a></dt><dd>This trait is used to allow encoder specific encodings of certain types.
It is similar to rustc_type_ir’s TyEncoder.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.char_width.html" title="fn rustc_span::char_width">char_<wbr>width</a></dt><dt><a class="fn" href="fn.create_default_session_globals_then.html" title="fn rustc_span::create_default_session_globals_then">create_<wbr>default_<wbr>session_<wbr>globals_<wbr>then</a></dt><dd>Default edition, no source map.</dd><dt><a class="fn" href="fn.create_session_globals_then.html" title="fn rustc_span::create_session_globals_then">create_<wbr>session_<wbr>globals_<wbr>then</a></dt><dt><a class="fn" href="fn.create_session_if_not_set_then.html" title="fn rustc_span::create_session_if_not_set_then">create_<wbr>session_<wbr>if_<wbr>not_<wbr>set_<wbr>then</a></dt><dd>No source map.</dd><dt><a class="fn" href="fn.normalize_newlines.html" title="fn rustc_span::normalize_newlines">normalize_<wbr>newlines</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Replaces <code>\r\n</code> with <code>\n</code> in-place in <code>src</code>.</dd><dt><a class="fn" href="fn.normalize_src.html" title="fn rustc_span::normalize_src">normalize_<wbr>src</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Normalizes the source code and records the normalizations.</dd><dt><a class="fn" href="fn.remove_bom.html" title="fn rustc_span::remove_bom">remove_<wbr>bom</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Removes UTF-8 BOM, if any.</dd><dt><a class="fn" href="fn.set_session_globals_then.html" title="fn rustc_span::set_session_globals_then">set_<wbr>session_<wbr>globals_<wbr>then</a></dt><dt><a class="fn" href="fn.str_width.html" title="fn rustc_span::str_width">str_<wbr>width</a></dt><dt><a class="fn" href="fn.with_metavar_spans.html" title="fn rustc_span::with_metavar_spans">with_<wbr>metavar_<wbr>spans</a></dt><dt><a class="fn" href="fn.with_session_globals.html" title="fn rustc_span::with_session_globals">with_<wbr>session_<wbr>globals</a></dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.FileLinesResult.html" title="type rustc_span::FileLinesResult">File<wbr>Lines<wbr>Result</a></dt></dl></section></div></main></body></html>