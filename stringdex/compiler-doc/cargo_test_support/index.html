<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cargo test support."><title>cargo_test_support - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-865d4876.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cargo_test_support" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-649a623e.js" data-stringdex-js="stringdex-910ef755.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-1b37d467.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0ec66560.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate cargo_test_support</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../cargo_test_support/index.html">cargo_<wbr>test_<wbr>support</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#cargo-test-support" title="Cargo test support.">Cargo test support.</a></li><li><a href="#example" title="Example">Example</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#attributes" title="Attribute Macros">Attribute Macros</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>cargo_<wbr>test_<wbr>support</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/cargo_test_support/lib.rs.html#1-1710">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="cargo-test-support"><a class="doc-anchor" href="#cargo-test-support">Â§</a>Cargo test support.</h2>
<p>See <a href="https://rust-lang.github.io/cargo/contrib/">https://rust-lang.github.io/cargo/contrib/</a> for a guide on writing tests.</p>
<p>There are two places you can find API documentation</p>
<ul>
<li><a href="https://docs.rs/cargo-test-support">https://docs.rs/cargo-test-support</a>:
targeted at external tool developers testing cargo-related code
<ul>
<li>Released with every rustc release</li>
</ul>
</li>
<li><a href="https://doc.rust-lang.org/nightly/nightly-rustc/cargo_test_support">https://doc.rust-lang.org/nightly/nightly-rustc/cargo_test_support</a>:
targeted at cargo contributors
<ul>
<li>Updated on each update of the <code>cargo</code> submodule in <code>rust-lang/rust</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>This crate is maintained by the Cargo team, primarily for use by Cargo
and not intended for external use. This
crate may make major changes to its APIs or be deprecated without warning.</p>
</blockquote>
<h2 id="example"><a class="doc-anchor" href="#example">Â§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cargo_test_support::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>cargo_test_support::str;
<span class="kw">use </span>cargo_test_support::project;

<span class="attr">#[cargo_test]
</span><span class="kw">fn </span>some_test() {
    <span class="kw">let </span>p = project()
        .file(<span class="string">"src/main.rs"</span>, <span class="string">r#"fn main() { println!("hi!"); }"#</span>)
        .build();

    p.cargo(<span class="string">"run --bin foo"</span>)
        .with_stderr_data(<span class="macro">str!</span>[[<span class="string">r#"
[COMPILING] foo [..]
[FINISHED] [..]
[RUNNING] `target/debug/foo`
"#</span>]])
        .with_stdout_data(<span class="macro">str!</span>[[<span class="string">"hi!"</span>]])
        .run();
}</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="mod" href="compare/index.html" title="mod cargo_test_support::compare">compare</a></dt><dd>Routines for comparing and diffing output.</dd><dt><a class="mod" href="containers/index.html" title="mod cargo_test_support::containers">containers</a></dt><dd>Support for testing using Docker containers.</dd><dt><a class="mod" href="cross_compile/index.html" title="mod cargo_test_support::cross_compile">cross_<wbr>compile</a></dt><dd>Support for cross-compile tests with the <code>--target</code> flag.</dd><dt><a class="mod" href="git/index.html" title="mod cargo_test_support::git">git</a></dt><dd>Git Testing Support</dd><dt><a class="mod" href="install/index.html" title="mod cargo_test_support::install">install</a></dt><dd>Helpers for testing <code>cargo install</code></dd><dt><a class="mod" href="paths/index.html" title="mod cargo_test_support::paths">paths</a></dt><dd>Access common paths and manipulate the filesystem</dd><dt><a class="mod" href="prelude/index.html" title="mod cargo_test_support::prelude">prelude</a></dt><dt><a class="mod" href="publish/index.html" title="mod cargo_test_support::publish">publish</a></dt><dd>Helpers for testing <code>cargo package</code> / <code>cargo publish</code></dd><dt><a class="mod" href="registry/index.html" title="mod cargo_test_support::registry">registry</a></dt><dd>Interact with the <a href="registry/struct.TestRegistry.html" title="struct cargo_test_support::registry::TestRegistry"><code>TestRegistry</code></a></dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.file.html" title="macro cargo_test_support::file">file</a></dt><dd>Declare an expected value for an assert from a file</dd><dt><a class="macro" href="macro.str.html" title="macro cargo_test_support::str">str</a></dt><dd>Declare an expected value from within Rust source</dd><dt><a class="macro" href="macro.t.html" title="macro cargo_test_support::t">t</a></dt><dd>Unwrap a <code>Result</code> with a useful panic message</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Execs.html" title="struct cargo_test_support::Execs">Execs</a></dt><dd>Run and verify a <a href="struct.ProcessBuilder.html" title="struct cargo_test_support::ProcessBuilder"><code>ProcessBuilder</code></a></dd><dt><a class="struct" href="struct.FileBuilder.html" title="struct cargo_test_support::FileBuilder">File<wbr>Builder</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="struct" href="struct.ProcessBuilder.html" title="struct cargo_test_support::ProcessBuilder">Process<wbr>Builder</a></dt><dd>A builder object for an external process, similar to <a href="https://doc.rust-lang.org/nightly/std/process/struct.Command.html" title="struct std::process::Command"><code>std::process::Command</code></a>.</dd><dt><a class="struct" href="struct.Project.html" title="struct cargo_test_support::Project">Project</a></dt><dd>A cargo project to run tests against.</dd><dt><a class="struct" href="struct.ProjectBuilder.html" title="struct cargo_test_support::ProjectBuilder">Project<wbr>Builder</a></dt><dd>Create a project to run tests against</dd><dt><a class="struct" href="struct.RawOutput.html" title="struct cargo_test_support::RawOutput">RawOutput</a></dt><dd>This is the raw output from the process.</dd><dt><a class="struct" href="struct.RustcInfo.html" title="struct cargo_test_support::RustcInfo">Rustc<wbr>Info</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="struct" href="struct.SymlinkBuilder.html" title="struct cargo_test_support::SymlinkBuilder">Symlink<wbr>Builder</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.ArgLineCommandExt.html" title="trait cargo_test_support::ArgLineCommandExt">ArgLine<wbr>Command<wbr>Ext</a></dt><dd>Add a list of arguments as a line</dd><dt><a class="trait" href="trait.ChannelChangerCommandExt.html" title="trait cargo_test_support::ChannelChangerCommandExt">Channel<wbr>Changer<wbr>Command<wbr>Ext</a></dt><dd>Enable nightly features for testing</dd><dt><a class="trait" href="trait.TestEnvCommandExt.html" title="trait cargo_test_support::TestEnvCommandExt">Test<wbr>EnvCommand<wbr>Ext</a></dt><dd>Establish a processâ€™s test environment</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn._process.html" title="fn cargo_test_support::_process">_process</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.assert_deps.html" title="fn cargo_test_support::assert_deps">assert_<wbr>deps</a></dt><dt><a class="fn" href="fn.assert_deps_contains.html" title="fn cargo_test_support::assert_deps_contains">assert_<wbr>deps_<wbr>contains</a></dt><dt><a class="fn" href="fn.basic_bin_manifest.html" title="fn cargo_test_support::basic_bin_manifest">basic_<wbr>bin_<wbr>manifest</a></dt><dd>Generate a <code>Cargo.toml</code> with the specified <code>bin.name</code></dd><dt><a class="fn" href="fn.basic_lib_manifest.html" title="fn cargo_test_support::basic_lib_manifest">basic_<wbr>lib_<wbr>manifest</a></dt><dd>Generate a <code>Cargo.toml</code> with the specified <code>lib.name</code></dd><dt><a class="fn" href="fn.basic_manifest.html" title="fn cargo_test_support::basic_manifest">basic_<wbr>manifest</a></dt><dd>Generate a basic <code>Cargo.toml</code></dd><dt><a class="fn" href="fn.execs.html" title="fn cargo_test_support::execs">execs</a></dt><dd>Run and verify a process, see <a href="struct.Execs.html" title="struct cargo_test_support::Execs"><code>Execs</code></a></dd><dt><a class="fn" href="fn.git_process.html" title="fn cargo_test_support::git_process">git_<wbr>process</a></dt><dd>Run <code>git $arg_line</code>, see <a href="struct.ProcessBuilder.html" title="struct cargo_test_support::ProcessBuilder"><code>ProcessBuilder</code></a></dd><dt><a class="fn" href="fn.is_coarse_mtime.html" title="fn cargo_test_support::is_coarse_mtime">is_<wbr>coarse_<wbr>mtime</a></dt><dd>Returns <code>true</code> if the local filesystem has low-resolution mtimes.</dd><dt><a class="fn" href="fn.is_nightly.html" title="fn cargo_test_support::is_nightly">is_<wbr>nightly</a></dt><dt><a class="fn" href="fn.main_file.html" title="fn cargo_test_support::main_file">main_<wbr>file</a></dt><dd>Generate a <code>main.rs</code> printing the specified text</dd><dt><a class="fn" href="fn.no_such_file_err_msg.html" title="fn cargo_test_support::no_such_file_err_msg">no_<wbr>such_<wbr>file_<wbr>err_<wbr>msg</a></dt><dd>The error message for ENOENT.</dd><dt><a class="fn" href="fn.panic_error.html" title="fn cargo_test_support::panic_error">panic_<wbr>error</a></dt><dd><code>panic!</code>, reporting the specified error , see also <a href="macro.t.html" title="macro cargo_test_support::t"><code>t!</code></a></dd><dt><a class="fn" href="fn.process.html" title="fn cargo_test_support::process">process</a></dt><dd>Run <code>$bin</code> in the testâ€™s environment, see <a href="struct.ProcessBuilder.html" title="struct cargo_test_support::ProcessBuilder"><code>ProcessBuilder</code></a></dd><dt><a class="fn" href="fn.project.html" title="fn cargo_test_support::project">project</a></dt><dd>Generates a project layout, see <a href="struct.ProjectBuilder.html" title="struct cargo_test_support::ProjectBuilder"><code>ProjectBuilder</code></a></dd><dt><a class="fn" href="fn.project_in.html" title="fn cargo_test_support::project_in">project_<wbr>in</a></dt><dd>Generates a project layout in given directory, see <a href="struct.ProjectBuilder.html" title="struct cargo_test_support::ProjectBuilder"><code>ProjectBuilder</code></a></dd><dt><a class="fn" href="fn.project_in_home.html" title="fn cargo_test_support::project_in_home">project_<wbr>in_<wbr>home</a></dt><dd>Generates a project layout inside our fake home dir, see <a href="struct.ProjectBuilder.html" title="struct cargo_test_support::ProjectBuilder"><code>ProjectBuilder</code></a></dd><dt><a class="fn" href="fn.retry.html" title="fn cargo_test_support::retry">retry</a></dt><dd>Helper to retry a function <code>n</code> times.</dd><dt><a class="fn" href="fn.rustc_host.html" title="fn cargo_test_support::rustc_host">rustc_<wbr>host</a></dt><dd>The rustc host such as <code>x86_64-unknown-linux-gnu</code>.</dd><dt><a class="fn" href="fn.rustc_host_env.html" title="fn cargo_test_support::rustc_host_env">rustc_<wbr>host_<wbr>env</a></dt><dd>The host triple suitable for use in a cargo environment variable (uppercased).</dd><dt><a class="fn" href="fn.rustc_info.html" title="fn cargo_test_support::rustc_info">rustc_<wbr>info</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.sleep_ms.html" title="fn cargo_test_support::sleep_ms">sleep_<wbr>ms</a></dt><dt><a class="fn" href="fn.slow_cpu_multiplier.html" title="fn cargo_test_support::slow_cpu_multiplier">slow_<wbr>cpu_<wbr>multiplier</a></dt><dd>A way for to increase the cut off for all the time based test.</dd><dt><a class="fn" href="fn.symlink_supported.html" title="fn cargo_test_support::symlink_supported">symlink_<wbr>supported</a></dt><dt><a class="fn" href="fn.thread_wait_timeout.html" title="fn cargo_test_support::thread_wait_timeout">thread_<wbr>wait_<wbr>timeout</a></dt><dd>Helper that waits for a thread to finish, up to <code>n</code> tenths of a second.</dd><dt><a class="fn" href="fn.threaded_timeout.html" title="fn cargo_test_support::threaded_timeout">threaded_<wbr>timeout</a></dt><dd>Helper that runs some function, and waits up to <code>n</code> tenths of a second for
it to finish.</dd></dl><h2 id="attributes" class="section-header">Attribute Macros<a href="#attributes" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="attr" href="attr.cargo_test.html" title="attr cargo_test_support::cargo_test">cargo_<wbr>test</a></dt><dd>Replacement for <code>#[test]</code></dd></dl></section></div></main></body></html>