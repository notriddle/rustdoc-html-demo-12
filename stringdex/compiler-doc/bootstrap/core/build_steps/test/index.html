<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Build-and-run steps for `./x.py test` test fixtures"><title>bootstrap::core::build_steps::test - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-865d4876.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="bootstrap" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-649a623e.js" data-stringdex-js="stringdex-910ef755.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-1b37d467.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-0ec66560.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module test</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../bootstrap/index.html">bootstrap</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module test</a></h2><h3><a href="#macros">Module Items</a></h3><ul class="block"><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In bootstrap::<wbr>core::<wbr>build_<wbr>steps</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">bootstrap</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">build_steps</a></div><h1>Module <span>test</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/bootstrap/core/build_steps/test.rs.html#1-3801">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Build-and-run steps for <code>./x.py test</code> test fixtures</p>
<p><code>./x.py test</code> (aka <a href="../../builder/enum.Kind.html#variant.Test" title="variant bootstrap::core::builder::Kind::Test"><code>Kind::Test</code></a>) is currently allowed to reach build steps in other modules.
However, this contains ~all test parts we expect people to be able to build and run locally.</p>
</div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.test.html" title="macro bootstrap::core::build_steps::test::test">test</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Declares a test step that invokes compiletest on a particular test suite.</dd><dt><a class="macro" href="macro.test_book.html" title="macro bootstrap::core::build_steps::test::test_book">test_<wbr>book</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.AssemblyLlvm.html" title="struct bootstrap::core::build_steps::test::AssemblyLlvm">Assembly<wbr>Llvm</a></dt><dt><a class="struct" href="struct.BookTest.html" title="struct bootstrap::core::build_steps::test::BookTest">Book<wbr>Test</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="struct" href="struct.Bootstrap.html" title="struct bootstrap::core::build_steps::test::Bootstrap">Bootstrap</a></dt><dt><a class="struct" href="struct.Cargo.html" title="struct bootstrap::core::build_steps::test::Cargo">Cargo</a></dt><dd>Runs <code>cargo test</code> for cargo itself.
We label these tests as “cargo self-tests”.</dd><dt><a class="struct" href="struct.CargoMiri.html" title="struct bootstrap::core::build_steps::test::CargoMiri">Cargo<wbr>Miri</a></dt><dd>Runs <code>cargo miri test</code> to demonstrate that <code>src/tools/miri/cargo-miri</code>
works and that libtest works under miri.</dd><dt><a class="struct" href="struct.Cargotest.html" title="struct bootstrap::core::build_steps::test::Cargotest">Cargotest</a></dt><dd>Builds cargo and then runs the <code>src/tools/cargotest</code> tool, which checks out
some representative crate repositories and runs <code>cargo test</code> on them, in
order to test cargo.</dd><dt><a class="struct" href="struct.Clippy.html" title="struct bootstrap::core::build_steps::test::Clippy">Clippy</a></dt><dt><a class="struct" href="struct.CodegenCranelift.html" title="struct bootstrap::core::build_steps::test::CodegenCranelift">Codegen<wbr>Cranelift</a></dt><dt><a class="struct" href="struct.CodegenGCC.html" title="struct bootstrap::core::build_steps::test::CodegenGCC">CodegenGCC</a></dt><dt><a class="struct" href="struct.CodegenLlvm.html" title="struct bootstrap::core::build_steps::test::CodegenLlvm">Codegen<wbr>Llvm</a></dt><dt><a class="struct" href="struct.CodegenUnits.html" title="struct bootstrap::core::build_steps::test::CodegenUnits">Codegen<wbr>Units</a></dt><dt><a class="struct" href="struct.CollectLicenseMetadata.html" title="struct bootstrap::core::build_steps::test::CollectLicenseMetadata">Collect<wbr>License<wbr>Metadata</a></dt><dd>Runs the tool <code>src/tools/collect-license-metadata</code> in <code>ONLY_CHECK=1</code> mode,
which verifies that <code>license-metadata.json</code> is up-to-date and therefore
running the tool normally would not update anything.</dd><dt><a class="struct" href="struct.Compiletest.html" title="struct bootstrap::core::build_steps::test::Compiletest">Compiletest</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="struct" href="struct.CompiletestTest.html" title="struct bootstrap::core::build_steps::test::CompiletestTest">Compiletest<wbr>Test</a></dt><dt><a class="struct" href="struct.Coverage.html" title="struct bootstrap::core::build_steps::test::Coverage">Coverage</a></dt><dd>Runs the coverage test suite at <code>tests/coverage</code> in some or all of the
coverage test modes.</dd><dt><a class="struct" href="struct.CoverageRunRustdoc.html" title="struct bootstrap::core::build_steps::test::CoverageRunRustdoc">Coverage<wbr>RunRustdoc</a></dt><dt><a class="struct" href="struct.Crashes.html" title="struct bootstrap::core::build_steps::test::Crashes">Crashes</a></dt><dt><a class="struct" href="struct.Crate.html" title="struct bootstrap::core::build_steps::test::Crate">Crate</a></dt><dd>Runs <code>cargo test</code> for standard library crates.</dd><dt><a class="struct" href="struct.CrateBootstrap.html" title="struct bootstrap::core::build_steps::test::CrateBootstrap">Crate<wbr>Bootstrap</a></dt><dd>Runs <code>cargo test</code> on various internal tools used by bootstrap.</dd><dt><a class="struct" href="struct.CrateBuildHelper.html" title="struct bootstrap::core::build_steps::test::CrateBuildHelper">Crate<wbr>Build<wbr>Helper</a></dt><dt><a class="struct" href="struct.CrateLibrustc.html" title="struct bootstrap::core::build_steps::test::CrateLibrustc">Crate<wbr>Librustc</a></dt><dd>Runs <code>cargo test</code> for the compiler crates in <code>compiler/</code>.</dd><dt><a class="struct" href="struct.CrateRunMakeSupport.html" title="struct bootstrap::core::build_steps::test::CrateRunMakeSupport">Crate<wbr>RunMake<wbr>Support</a></dt><dd>Runs <code>cargo test</code> on the <code>src/tools/run-make-support</code> crate.
That crate is used by run-make tests.</dd><dt><a class="struct" href="struct.CrateRustdoc.html" title="struct bootstrap::core::build_steps::test::CrateRustdoc">Crate<wbr>Rustdoc</a></dt><dd>Rustdoc is special in various ways, which is why this step is different from <code>Crate</code>.</dd><dt><a class="struct" href="struct.CrateRustdocJsonTypes.html" title="struct bootstrap::core::build_steps::test::CrateRustdocJsonTypes">Crate<wbr>Rustdoc<wbr>Json<wbr>Types</a></dt><dt><a class="struct" href="struct.Debuginfo.html" title="struct bootstrap::core::build_steps::test::Debuginfo">Debuginfo</a></dt><dt><a class="struct" href="struct.Distcheck.html" title="struct bootstrap::core::build_steps::test::Distcheck">Distcheck</a></dt><dt><a class="struct" href="struct.EditionGuide.html" title="struct bootstrap::core::build_steps::test::EditionGuide">Edition<wbr>Guide</a></dt><dt><a class="struct" href="struct.EmbeddedBook.html" title="struct bootstrap::core::build_steps::test::EmbeddedBook">Embedded<wbr>Book</a></dt><dt><a class="struct" href="struct.ErrorIndex.html" title="struct bootstrap::core::build_steps::test::ErrorIndex">Error<wbr>Index</a></dt><dt><a class="struct" href="struct.HtmlCheck.html" title="struct bootstrap::core::build_steps::test::HtmlCheck">Html<wbr>Check</a></dt><dt><a class="struct" href="struct.Incremental.html" title="struct bootstrap::core::build_steps::test::Incremental">Incremental</a></dt><dt><a class="struct" href="struct.Linkcheck.html" title="struct bootstrap::core::build_steps::test::Linkcheck">Linkcheck</a></dt><dt><a class="struct" href="struct.LintDocs.html" title="struct bootstrap::core::build_steps::test::LintDocs">Lint<wbr>Docs</a></dt><dt><a class="struct" href="struct.MirOpt.html" title="struct bootstrap::core::build_steps::test::MirOpt">MirOpt</a></dt><dt><a class="struct" href="struct.Miri.html" title="struct bootstrap::core::build_steps::test::Miri">Miri</a></dt><dt><a class="struct" href="struct.Nomicon.html" title="struct bootstrap::core::build_steps::test::Nomicon">Nomicon</a></dt><dt><a class="struct" href="struct.Pretty.html" title="struct bootstrap::core::build_steps::test::Pretty">Pretty</a></dt><dt><a class="struct" href="struct.Reference.html" title="struct bootstrap::core::build_steps::test::Reference">Reference</a></dt><dt><a class="struct" href="struct.RemoteCopyLibs.html" title="struct bootstrap::core::build_steps::test::RemoteCopyLibs">Remote<wbr>Copy<wbr>Libs</a></dt><dd>Some test suites are run inside emulators or on remote devices, and most
of our test binaries are linked dynamically which means we need to ship
the standard library and such to the emulator ahead of time. This step
represents this and is a dependency of all test suites.</dd><dt><a class="struct" href="struct.RunMake.html" title="struct bootstrap::core::build_steps::test::RunMake">RunMake</a></dt><dt><a class="struct" href="struct.RustAnalyzer.html" title="struct bootstrap::core::build_steps::test::RustAnalyzer">Rust<wbr>Analyzer</a></dt><dt><a class="struct" href="struct.RustByExample.html" title="struct bootstrap::core::build_steps::test::RustByExample">Rust<wbr>ByExample</a></dt><dt><a class="struct" href="struct.RustInstaller.html" title="struct bootstrap::core::build_steps::test::RustInstaller">Rust<wbr>Installer</a></dt><dt><a class="struct" href="struct.RustcBook.html" title="struct bootstrap::core::build_steps::test::RustcBook">Rustc<wbr>Book</a></dt><dt><a class="struct" href="struct.Rustdoc.html" title="struct bootstrap::core::build_steps::test::Rustdoc">Rustdoc</a></dt><dt><a class="struct" href="struct.RustdocBook.html" title="struct bootstrap::core::build_steps::test::RustdocBook">Rustdoc<wbr>Book</a></dt><dt><a class="struct" href="struct.RustdocGUI.html" title="struct bootstrap::core::build_steps::test::RustdocGUI">RustdocGUI</a></dt><dt><a class="struct" href="struct.RustdocJSNotStd.html" title="struct bootstrap::core::build_steps::test::RustdocJSNotStd">RustdocJS<wbr>NotStd</a></dt><dt><a class="struct" href="struct.RustdocJSStd.html" title="struct bootstrap::core::build_steps::test::RustdocJSStd">RustdocJS<wbr>Std</a></dt><dt><a class="struct" href="struct.RustdocJson.html" title="struct bootstrap::core::build_steps::test::RustdocJson">Rustdoc<wbr>Json</a></dt><dt><a class="struct" href="struct.RustdocTheme.html" title="struct bootstrap::core::build_steps::test::RustdocTheme">Rustdoc<wbr>Theme</a></dt><dt><a class="struct" href="struct.RustdocUi.html" title="struct bootstrap::core::build_steps::test::RustdocUi">Rustdoc<wbr>Ui</a></dt><dt><a class="struct" href="struct.Rustfmt.html" title="struct bootstrap::core::build_steps::test::Rustfmt">Rustfmt</a></dt><dd>Runs <code>cargo test</code> for rustfmt.</dd><dt><a class="struct" href="struct.TestFloatParse.html" title="struct bootstrap::core::build_steps::test::TestFloatParse">Test<wbr>Float<wbr>Parse</a></dt><dd>Test step that does two things:</dd><dt><a class="struct" href="struct.TestHelpers.html" title="struct bootstrap::core::build_steps::test::TestHelpers">Test<wbr>Helpers</a></dt><dt><a class="struct" href="struct.TheBook.html" title="struct bootstrap::core::build_steps::test::TheBook">TheBook</a></dt><dt><a class="struct" href="struct.Tidy.html" title="struct bootstrap::core::build_steps::test::Tidy">Tidy</a></dt><dd>Runs <code>src/tools/tidy</code> and <code>cargo fmt --check</code> to detect various style
problems in the repository.</dd><dt><a class="struct" href="struct.TierCheck.html" title="struct bootstrap::core::build_steps::test::TierCheck">Tier<wbr>Check</a></dt><dt><a class="struct" href="struct.Ui.html" title="struct bootstrap::core::build_steps::test::Ui">Ui</a></dt><dt><a class="struct" href="struct.UiFullDeps.html" title="struct bootstrap::core::build_steps::test::UiFullDeps">UiFull<wbr>Deps</a></dt><dt><a class="struct" href="struct.UnstableBook.html" title="struct bootstrap::core::build_steps::test::UnstableBook">Unstable<wbr>Book</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.ADB_TEST_DIR.html" title="constant bootstrap::core::build_steps::test::ADB_TEST_DIR">ADB_<wbr>TEST_<wbr>DIR</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.bin_path_for_cargo.html" title="fn bootstrap::core::build_steps::test::bin_path_for_cargo">bin_<wbr>path_<wbr>for_<wbr>cargo</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="fn" href="fn.check_if_tidy_is_installed.html" title="fn bootstrap::core::build_steps::test::check_if_tidy_is_installed">check_<wbr>if_<wbr>tidy_<wbr>is_<wbr>installed</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="fn" href="fn.get_browser_ui_test_version.html" title="fn bootstrap::core::build_steps::test::get_browser_ui_test_version">get_<wbr>browser_<wbr>ui_<wbr>test_<wbr>version</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="fn" href="fn.get_browser_ui_test_version_inner.html" title="fn bootstrap::core::build_steps::test::get_browser_ui_test_version_inner">get_<wbr>browser_<wbr>ui_<wbr>test_<wbr>version_<wbr>inner</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="fn" href="fn.markdown_test.html" title="fn bootstrap::core::build_steps::test::markdown_test">markdown_<wbr>test</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="fn" href="fn.prepare_cargo_test.html" title="fn bootstrap::core::build_steps::test::prepare_cargo_test">prepare_<wbr>cargo_<wbr>test</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Given a <code>cargo test</code> subcommand, pass it the appropriate test flags given a <code>builder</code>.</dd><dt><a class="fn" href="fn.run_cargo_test.html" title="fn bootstrap::core::build_steps::test::run_cargo_test">run_<wbr>cargo_<wbr>test</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Given a <code>cargo test</code> subcommand, add the appropriate flags and run it.</dd><dt><a class="fn" href="fn.testdir.html" title="fn bootstrap::core::build_steps::test::testdir">testdir</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl></section></div></main></body></html>