<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implementation of compiling various phases of the compiler and standard library."><title>bootstrap::core::build_steps::compile - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="bootstrap" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0-beta.1 (788da80fc 2025-08-04)" data-channel="beta" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../../../../static.files/storage-68b7e25d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../bootstrap/index.html">bootstrap</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module compile</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In bootstrap::<wbr>core::<wbr>build_<wbr>steps</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">bootstrap</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">build_steps</a></div><h1>Module <span>compile</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/bootstrap/core/build_steps/compile.rs.html#1-2700">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implementation of compiling various phases of the compiler and standard
library.</p>
<p>This module contains some of the real meat in the bootstrap build system
which is where Cargo is used to compile the standard library, libtest, and
the compiler. This module is also responsible for assembling the sysroot as it
goes along from the output of the previous stage.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Assemble.html" title="struct bootstrap::core::build_steps::compile::Assemble">Assemble</a></dt><dt><a class="struct" href="struct.CargoTarget.html" title="struct bootstrap::core::build_steps::compile::CargoTarget">Cargo<wbr>Target</a></dt><dt><a class="struct" href="struct.CraneliftCodegenBackend.html" title="struct bootstrap::core::build_steps::compile::CraneliftCodegenBackend">Cranelift<wbr>Codegen<wbr>Backend</a></dt><dt><a class="struct" href="struct.GccCodegenBackend.html" title="struct bootstrap::core::build_steps::compile::GccCodegenBackend">GccCodegen<wbr>Backend</a></dt><dt><a class="struct" href="struct.GccCodegenBackendOutput.html" title="struct bootstrap::core::build_steps::compile::GccCodegenBackendOutput">GccCodegen<wbr>Backend<wbr>Output</a></dt><dd>Output of the <code>compile::GccCodegenBackend</code> step.
It includes the path to the libgccjit library on which this backend depends.</dd><dt><a class="struct" href="struct.Rustc.html" title="struct bootstrap::core::build_steps::compile::Rustc">Rustc</a></dt><dd>Build rustc using the passed <code>build_compiler</code>.</dd><dt><a class="struct" href="struct.RustcLink.html" title="struct bootstrap::core::build_steps::compile::RustcLink">Rustc<wbr>Link</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd><code>RustcLink</code> copies all of the rlibs from the rustc build into the previous stageâ€™s sysroot.
This is necessary for tools using <code>rustc_private</code>, where the previous compiler will build
a tool against the next compiler.
To build a tool against a compiler, the rlibs of that compiler that it links against
must be in the sysroot of the compiler thatâ€™s doing the compiling.</dd><dt><a class="struct" href="struct.StartupObjects.html" title="struct bootstrap::core::build_steps::compile::StartupObjects">Startup<wbr>Objects</a></dt><dt><a class="struct" href="struct.Std.html" title="struct bootstrap::core::build_steps::compile::Std">Std</a></dt><dd>Build a standard library for the given <code>target</code> using the given <code>compiler</code>.</dd><dt><a class="struct" href="struct.StdLink.html" title="struct bootstrap::core::build_steps::compile::StdLink">StdLink</a></dt><dt><a class="struct" href="struct.Sysroot.html" title="struct bootstrap::core::build_steps::compile::Sysroot">Sysroot</a></dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.CargoMessage.html" title="enum bootstrap::core::build_steps::compile::CargoMessage">Cargo<wbr>Message</a></dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.add_to_sysroot.html" title="fn bootstrap::core::build_steps::compile::add_to_sysroot">add_<wbr>to_<wbr>sysroot</a></dt><dd>Link some files into a rustc sysroot.</dd><dt><a class="fn" href="fn.apple_darwin_sign_file.html" title="fn bootstrap::core::build_steps::compile::apple_darwin_sign_file">apple_<wbr>darwin_<wbr>sign_<wbr>file</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.apple_darwin_update_library_name.html" title="fn bootstrap::core::build_steps::compile::apple_darwin_update_library_name">apple_<wbr>darwin_<wbr>update_<wbr>library_<wbr>name</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.compiler_file.html" title="fn bootstrap::core::build_steps::compile::compiler_file">compiler_<wbr>file</a></dt><dt><a class="fn" href="fn.compiler_rt_for_profiler.html" title="fn bootstrap::core::build_steps::compile::compiler_rt_for_profiler">compiler_<wbr>rt_<wbr>for_<wbr>profiler</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Tries to find LLVMâ€™s <code>compiler-rt</code> source directory, for building <code>library/profiler_builtins</code>.</dd><dt><a class="fn" href="fn.copy_and_stamp.html" title="fn bootstrap::core::build_steps::compile::copy_and_stamp">copy_<wbr>and_<wbr>stamp</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.copy_codegen_backends_to_sysroot.html" title="fn bootstrap::core::build_steps::compile::copy_codegen_backends_to_sysroot">copy_<wbr>codegen_<wbr>backends_<wbr>to_<wbr>sysroot</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Creates the <code>codegen-backends</code> folder for a compiler thatâ€™s about to be
assembled as a complete compiler.</dd><dt><a class="fn" href="fn.copy_llvm_libunwind.html" title="fn bootstrap::core::build_steps::compile::copy_llvm_libunwind">copy_<wbr>llvm_<wbr>libunwind</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.copy_sanitizers.html" title="fn bootstrap::core::build_steps::compile::copy_sanitizers">copy_<wbr>sanitizers</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Copies sanitizer runtime libraries into target libdir.</dd><dt><a class="fn" href="fn.copy_self_contained_objects.html" title="fn bootstrap::core::build_steps::compile::copy_self_contained_objects">copy_<wbr>self_<wbr>contained_<wbr>objects</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Copies third party objects needed by various targets for self-contained linkage.</dd><dt><a class="fn" href="fn.copy_third_party_objects.html" title="fn bootstrap::core::build_steps::compile::copy_third_party_objects">copy_<wbr>third_<wbr>party_<wbr>objects</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Copies third party objects needed by various targets.</dd><dt><a class="fn" href="fn.cp_rustc_component_to_ci_sysroot.html" title="fn bootstrap::core::build_steps::compile::cp_rustc_component_to_ci_sysroot">cp_<wbr>rustc_<wbr>component_<wbr>to_<wbr>ci_<wbr>sysroot</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.get_codegen_backend_file.html" title="fn bootstrap::core::build_steps::compile::get_codegen_backend_file">get_<wbr>codegen_<wbr>backend_<wbr>file</a></dt><dd>Gets the path to a dynamic codegen backend library from its build stamp.</dd><dt><a class="fn" href="fn.is_lto_stage.html" title="fn bootstrap::core::build_steps::compile::is_lto_stage">is_<wbr>lto_<wbr>stage</a></dt><dd>We only use LTO for stage 2+, to speed up build time of intermediate stages.</dd><dt><a class="fn" href="fn.normalize_codegen_backend_name.html" title="fn bootstrap::core::build_steps::compile::normalize_codegen_backend_name">normalize_<wbr>codegen_<wbr>backend_<wbr>name</a></dt><dd>Normalize the name of a dynamic codegen backend library.</dd><dt><a class="fn" href="fn.run_cargo.html" title="fn bootstrap::core::build_steps::compile::run_cargo">run_<wbr>cargo</a></dt><dt><a class="fn" href="fn.rustc_cargo.html" title="fn bootstrap::core::build_steps::compile::rustc_cargo">rustc_<wbr>cargo</a></dt><dt><a class="fn" href="fn.rustc_cargo_env.html" title="fn bootstrap::core::build_steps::compile::rustc_cargo_env">rustc_<wbr>cargo_<wbr>env</a></dt><dt><a class="fn" href="fn.rustc_llvm_env.html" title="fn bootstrap::core::build_steps::compile::rustc_llvm_env">rustc_<wbr>llvm_<wbr>env</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Pass down configuration from the LLVM build into the build of
rustc_llvm and rustc_codegen_llvm.</dd><dt><a class="fn" href="fn.std_cargo.html" title="fn bootstrap::core::build_steps::compile::std_cargo">std_<wbr>cargo</a></dt><dd>Configure cargo to compile the standard library, adding appropriate env vars
and such.</dd><dt><a class="fn" href="fn.std_crates_for_run_make.html" title="fn bootstrap::core::build_steps::compile::std_crates_for_run_make">std_<wbr>crates_<wbr>for_<wbr>run_<wbr>make</a></dt><dd>Resolves standard library crates for <code>Std::run_make</code> for any build kind (like check, doc,
build, clippy, etc.).</dd><dt><a class="fn" href="fn.stream_cargo.html" title="fn bootstrap::core::build_steps::compile::stream_cargo">stream_<wbr>cargo</a></dt><dt><a class="fn" href="fn.strip_debug.html" title="fn bootstrap::core::build_steps::compile::strip_debug">strip_<wbr>debug</a></dt><dt><a class="fn" href="fn.write_codegen_backend_stamp.html" title="fn bootstrap::core::build_steps::compile::write_codegen_backend_stamp">write_<wbr>codegen_<wbr>backend_<wbr>stamp</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Write filtered <code>files</code> into the passed build stamp and returns it.</dd></dl></section></div></main></body></html>