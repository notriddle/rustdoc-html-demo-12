<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An interpreter for MIR used in CTFE and by miri."><title>rustc_middle::mir::interpret - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-528d32ef.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="rustc_middle" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-e93015a6.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-1b37d467.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-c7770cbf.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module interpret</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../rustc_middle/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../../../rustc_middle/index.html">rustc_<wbr>middle</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module interpret</a></h2><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In rustc_<wbr>middle::<wbr>mir</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">rustc_middle</a>::<wbr><a href="../index.html">mir</a></div><h1>Module <span>interpret</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/rustc_middle/mir/interpret/mod.rs.html#1-603">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An interpreter for MIR used in CTFE and by miri.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="allocation/index.html" title="mod rustc_middle::mir::interpret::allocation">allocation</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>The virtual memory representation of the MIR interpreter.</dd><dt><a class="mod" href="error/index.html" title="mod rustc_middle::mir::interpret::error">error</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="pointer/index.html" title="mod rustc_middle::mir::interpret::pointer">pointer</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="queries/index.html" title="mod rustc_middle::mir::interpret::queries">queries</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="value/index.html" title="mod rustc_middle::mir::interpret::value">value</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.err_exhaust.html" title="macro rustc_middle::mir::interpret::err_exhaust">err_<wbr>exhaust</a></dt><dt><a class="macro" href="macro.err_inval.html" title="macro rustc_middle::mir::interpret::err_inval">err_<wbr>inval</a></dt><dt><a class="macro" href="macro.err_machine_stop.html" title="macro rustc_middle::mir::interpret::err_machine_stop">err_<wbr>machine_<wbr>stop</a></dt><dt><a class="macro" href="macro.err_ub.html" title="macro rustc_middle::mir::interpret::err_ub">err_ub</a></dt><dt><a class="macro" href="macro.err_ub_custom.html" title="macro rustc_middle::mir::interpret::err_ub_custom">err_<wbr>ub_<wbr>custom</a></dt><dt><a class="macro" href="macro.err_ub_format.html" title="macro rustc_middle::mir::interpret::err_ub_format">err_<wbr>ub_<wbr>format</a></dt><dt><a class="macro" href="macro.err_unsup.html" title="macro rustc_middle::mir::interpret::err_unsup">err_<wbr>unsup</a></dt><dt><a class="macro" href="macro.err_unsup_format.html" title="macro rustc_middle::mir::interpret::err_unsup_format">err_<wbr>unsup_<wbr>format</a></dt><dt><a class="macro" href="macro.throw_exhaust.html" title="macro rustc_middle::mir::interpret::throw_exhaust">throw_<wbr>exhaust</a></dt><dt><a class="macro" href="macro.throw_inval.html" title="macro rustc_middle::mir::interpret::throw_inval">throw_<wbr>inval</a></dt><dt><a class="macro" href="macro.throw_machine_stop.html" title="macro rustc_middle::mir::interpret::throw_machine_stop">throw_<wbr>machine_<wbr>stop</a></dt><dt><a class="macro" href="macro.throw_ub.html" title="macro rustc_middle::mir::interpret::throw_ub">throw_<wbr>ub</a></dt><dt><a class="macro" href="macro.throw_ub_custom.html" title="macro rustc_middle::mir::interpret::throw_ub_custom">throw_<wbr>ub_<wbr>custom</a></dt><dt><a class="macro" href="macro.throw_ub_format.html" title="macro rustc_middle::mir::interpret::throw_ub_format">throw_<wbr>ub_<wbr>format</a></dt><dt><a class="macro" href="macro.throw_unsup.html" title="macro rustc_middle::mir::interpret::throw_unsup">throw_<wbr>unsup</a></dt><dt><a class="macro" href="macro.throw_unsup_format.html" title="macro rustc_middle::mir::interpret::throw_unsup_format">throw_<wbr>unsup_<wbr>format</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.AllocDecodingSession.html" title="struct rustc_middle::mir::interpret::AllocDecodingSession">Alloc<wbr>Decoding<wbr>Session</a></dt><dt><a class="struct" href="struct.AllocDecodingState.html" title="struct rustc_middle::mir::interpret::AllocDecodingState">Alloc<wbr>Decoding<wbr>State</a></dt><dt><a class="struct" href="struct.AllocId.html" title="struct rustc_middle::mir::interpret::AllocId">AllocId</a></dt><dt><a class="struct" href="struct.AllocMap.html" title="struct rustc_middle::mir::interpret::AllocMap">Alloc<wbr>Map</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="struct" href="struct.AllocRange.html" title="struct rustc_middle::mir::interpret::AllocRange">Alloc<wbr>Range</a></dt><dd>The information that makes up a memory access: offset and size.</dd><dt><a class="struct" href="struct.Allocation.html" title="struct rustc_middle::mir::interpret::Allocation">Allocation</a></dt><dd>This type represents an Allocation in the Miri/CTFE core engine.</dd><dt><a class="struct" href="struct.BadBytesAccess.html" title="struct rustc_middle::mir::interpret::BadBytesAccess">BadBytes<wbr>Access</a></dt><dd>Details of an access to uninitialized bytes / bad pointer bytes where it is not allowed.</dd><dt><a class="struct" href="struct.ConstAllocation.html" title="struct rustc_middle::mir::interpret::ConstAllocation">Const<wbr>Allocation</a></dt><dd>Interned types generally have an <code>Outer</code> type and an <code>Inner</code> type, where
<code>Outer</code> is a newtype around <code>Interned&lt;Inner&gt;</code>, and all the operations are
done on <code>Outer</code>, because all occurrences are interned. E.g. <code>Ty</code> is an
outer type and <code>TyKind</code> is its inner type.</dd><dt><a class="struct" href="struct.CtfeProvenance.html" title="struct rustc_middle::mir::interpret::CtfeProvenance">Ctfe<wbr>Provenance</a></dt><dd>The type of provenance in the compile-time interpreter.
This is a packed representation of:</dd><dt><a class="struct" href="struct.GlobalId.html" title="struct rustc_middle::mir::interpret::GlobalId">Global<wbr>Id</a></dt><dd>Uniquely identifies one of the following:</dd><dt><a class="struct" href="struct.InitChunkIter.html" title="struct rustc_middle::mir::interpret::InitChunkIter">Init<wbr>Chunk<wbr>Iter</a></dt><dd>Yields <a href="enum.InitChunk.html" title="enum rustc_middle::mir::interpret::InitChunk"><code>InitChunk</code></a>s. See <a href="allocation/init_mask/struct.InitMask.html#method.range_as_init_chunks" title="method rustc_middle::mir::interpret::allocation::init_mask::InitMask::range_as_init_chunks"><code>InitMask::range_as_init_chunks</code></a>.</dd><dt><a class="struct" href="struct.InterpErrorInfo.html" title="struct rustc_middle::mir::interpret::InterpErrorInfo">Interp<wbr>Error<wbr>Info</a></dt><dd>Packages the kind of error we got from the const code interpreter
up with a Rust-level backtrace of where the error occurred.
These should always be constructed by calling <code>.into()</code> on
an <code>InterpError</code>. In <code>rustc_mir::interpret</code>, we have <code>throw_err_*</code>
macros for this.</dd><dt><a class="struct" href="struct.InterpResult.html" title="struct rustc_middle::mir::interpret::InterpResult">Interp<wbr>Result</a></dt><dd>The result type used by the interpreter. This is a newtype around <code>Result</code>
to block access to operations like <code>ok()</code> that discard UB errors.</dd><dt><a class="struct" href="struct.LitToConstInput.html" title="struct rustc_middle::mir::interpret::LitToConstInput">LitTo<wbr>Const<wbr>Input</a></dt><dd>Input argument for <code>tcx.lit_to_const</code>.</dd><dt><a class="struct" href="struct.Misalignment.html" title="struct rustc_middle::mir::interpret::Misalignment">Misalignment</a></dt><dd>Information about a misaligned pointer.</dd><dt><a class="struct" href="struct.Pointer.html" title="struct rustc_middle::mir::interpret::Pointer">Pointer</a></dt><dd>Represents a pointer in the Miri engine.</dd><dt><a class="struct" href="struct.ReportedErrorInfo.html" title="struct rustc_middle::mir::interpret::ReportedErrorInfo">Reported<wbr>Error<wbr>Info</a></dt><dt><a class="struct" href="struct.ScalarSizeMismatch.html" title="struct rustc_middle::mir::interpret::ScalarSizeMismatch">Scalar<wbr>Size<wbr>Mismatch</a></dt><dd>Information about a size mismatch.</dd><dt><a class="struct" href="struct.ValidationErrorInfo.html" title="struct rustc_middle::mir::interpret::ValidationErrorInfo">Validation<wbr>Error<wbr>Info</a></dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.AllocDiscriminant.html" title="enum rustc_middle::mir::interpret::AllocDiscriminant">Alloc<wbr>Discriminant</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="enum" href="enum.AllocError.html" title="enum rustc_middle::mir::interpret::AllocError">Alloc<wbr>Error</a></dt><dd>We have our own error type that does not know about the <code>AllocId</code>; that information
is added when converting to <code>InterpError</code>.</dd><dt><a class="enum" href="enum.AllocInit.html" title="enum rustc_middle::mir::interpret::AllocInit">Alloc<wbr>Init</a></dt><dd>Whether a new allocation should be initialized with zero-bytes.</dd><dt><a class="enum" href="enum.CheckAlignMsg.html" title="enum rustc_middle::mir::interpret::CheckAlignMsg">Check<wbr>Align<wbr>Msg</a></dt><dd>Details of which pointer is not aligned.</dd><dt><a class="enum" href="enum.CheckInAllocMsg.html" title="enum rustc_middle::mir::interpret::CheckInAllocMsg">Check<wbr>InAlloc<wbr>Msg</a></dt><dd>Details of why a pointer had to be in-bounds.</dd><dt><a class="enum" href="enum.ErrorHandled.html" title="enum rustc_middle::mir::interpret::ErrorHandled">Error<wbr>Handled</a></dt><dt><a class="enum" href="enum.ExpectedKind.html" title="enum rustc_middle::mir::interpret::ExpectedKind">Expected<wbr>Kind</a></dt><dt><a class="enum" href="enum.GlobalAlloc.html" title="enum rustc_middle::mir::interpret::GlobalAlloc">Global<wbr>Alloc</a></dt><dd>An allocation in the global (tcx-managed) memory can be either a function pointer,
a static, or a “real” allocation with some data in it.</dd><dt><a class="enum" href="enum.InitChunk.html" title="enum rustc_middle::mir::interpret::InitChunk">Init<wbr>Chunk</a></dt><dd>A contiguous chunk of initialized or uninitialized memory.</dd><dt><a class="enum" href="enum.InterpErrorKind.html" title="enum rustc_middle::mir::interpret::InterpErrorKind">Interp<wbr>Error<wbr>Kind</a></dt><dt><a class="enum" href="enum.InvalidMetaKind.html" title="enum rustc_middle::mir::interpret::InvalidMetaKind">Invalid<wbr>Meta<wbr>Kind</a></dt><dt><a class="enum" href="enum.InvalidProgramInfo.html" title="enum rustc_middle::mir::interpret::InvalidProgramInfo">Invalid<wbr>Program<wbr>Info</a></dt><dd>Error information for when the program we executed turned out not to actually be a valid
program. This cannot happen in stand-alone Miri (except for layout errors that are only detect
during monomorphization), but it can happen during CTFE/ConstProp where we work on generic code
or execution does not have all information available.</dd><dt><a class="enum" href="enum.PointerKind.html" title="enum rustc_middle::mir::interpret::PointerKind">Pointer<wbr>Kind</a></dt><dt><a class="enum" href="enum.ResourceExhaustionInfo.html" title="enum rustc_middle::mir::interpret::ResourceExhaustionInfo">Resource<wbr>Exhaustion<wbr>Info</a></dt><dd>Error information for when the program exhausted the resources granted to it
by the interpreter.</dd><dt><a class="enum" href="enum.Scalar.html" title="enum rustc_middle::mir::interpret::Scalar">Scalar</a></dt><dd>A <code>Scalar</code> represents an immediate, primitive value existing outside of a
<code>memory::Allocation</code>. It is in many ways like a small chunk of an <code>Allocation</code>, up to 16 bytes in
size. Like a range of bytes in an <code>Allocation</code>, a <code>Scalar</code> can either represent the raw bytes
of a simple value or a pointer into another <code>Allocation</code></dd><dt><a class="enum" href="enum.State.html" title="enum rustc_middle::mir::interpret::State">State</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="enum" href="enum.UndefinedBehaviorInfo.html" title="enum rustc_middle::mir::interpret::UndefinedBehaviorInfo">Undefined<wbr>Behavior<wbr>Info</a></dt><dd>Error information for when the program caused Undefined Behavior.</dd><dt><a class="enum" href="enum.UnsupportedOpInfo.html" title="enum rustc_middle::mir::interpret::UnsupportedOpInfo">Unsupported<wbr>OpInfo</a></dt><dd>Error information for when the program did something that might (or might not) be correct
to do according to the Rust spec, but due to limitations in the interpreter, the
operation could not be carried out. These limitations can differ between CTFE and the
Miri engine, e.g., CTFE does not support dereferencing pointers at integral addresses.</dd><dt><a class="enum" href="enum.ValTreeCreationError.html" title="enum rustc_middle::mir::interpret::ValTreeCreationError">ValTree<wbr>Creation<wbr>Error</a></dt><dd>An error type for the <code>const_to_valtree</code> query. Some error should be reported with a “use-site span”,
which means the query cannot emit the error, so those errors are represented as dedicated variants here.</dd><dt><a class="enum" href="enum.ValidationErrorKind.html" title="enum rustc_middle::mir::interpret::ValidationErrorKind">Validation<wbr>Error<wbr>Kind</a></dt></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.CTFE_ALLOC_SALT.html" title="constant rustc_middle::mir::interpret::CTFE_ALLOC_SALT">CTFE_<wbr>ALLOC_<wbr>SALT</a></dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.AllocBytes.html" title="trait rustc_middle::mir::interpret::AllocBytes">Alloc<wbr>Bytes</a></dt><dd>Functionality required for the bytes of an <code>Allocation</code>.</dd><dt><a class="trait" href="trait.MachineStopType.html" title="trait rustc_middle::mir::interpret::MachineStopType">Machine<wbr>Stop<wbr>Type</a></dt><dd>A trait for machine-specific errors (or other “machine stop” conditions).</dd><dt><a class="trait" href="trait.PointerArithmetic.html" title="trait rustc_middle::mir::interpret::PointerArithmetic">Pointer<wbr>Arithmetic</a></dt><dt><a class="trait" href="trait.Provenance.html" title="trait rustc_middle::mir::interpret::Provenance">Provenance</a></dt><dd>This trait abstracts over the kind of provenance that is associated with a <code>Pointer</code>. It is
mostly opaque; the <code>Machine</code> trait extends it with some more operations that also have access to
some global state.
The <code>Debug</code> rendering is used to display bare provenance, and for the default impl of <code>fmt</code>.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.alloc_range.html" title="fn rustc_middle::mir::interpret::alloc_range">alloc_<wbr>range</a></dt><dd>Free-starting constructor for less syntactic overhead.</dd><dt><a class="fn" href="fn.interp_ok.html" title="fn rustc_middle::mir::interpret::interp_ok">interp_<wbr>ok</a></dt><dt><a class="fn" href="fn.read_target_uint.html" title="fn rustc_middle::mir::interpret::read_target_uint">read_<wbr>target_<wbr>uint</a></dt><dt><a class="fn" href="fn.specialized_encode_alloc_id.html" title="fn rustc_middle::mir::interpret::specialized_encode_alloc_id">specialized_<wbr>encode_<wbr>alloc_<wbr>id</a></dt><dt><a class="fn" href="fn.write_target_uint.html" title="fn rustc_middle::mir::interpret::write_target_uint">write_<wbr>target_<wbr>uint</a></dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.AllocResult.html" title="type rustc_middle::mir::interpret::AllocResult">Alloc<wbr>Result</a></dt><dt><a class="type" href="type.EvalStaticInitializerRawResult.html" title="type rustc_middle::mir::interpret::EvalStaticInitializerRawResult">Eval<wbr>Static<wbr>Initializer<wbr>RawResult</a></dt><dt><a class="type" href="type.EvalToAllocationRawResult.html" title="type rustc_middle::mir::interpret::EvalToAllocationRawResult">Eval<wbr>ToAllocation<wbr>RawResult</a></dt><dt><a class="type" href="type.EvalToConstValueResult.html" title="type rustc_middle::mir::interpret::EvalToConstValueResult">Eval<wbr>ToConst<wbr>Value<wbr>Result</a></dt><dt><a class="type" href="type.EvalToValTreeResult.html" title="type rustc_middle::mir::interpret::EvalToValTreeResult">Eval<wbr>ToVal<wbr>Tree<wbr>Result</a></dt></dl></section></div></main></body></html>