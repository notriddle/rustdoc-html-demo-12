<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `llvm_enzyme` mod in crate `rustc_builtin_macros`."><title>rustc_builtin_macros::autodiff::llvm_enzyme - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-865d4876.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="rustc_builtin_macros" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-649a623e.js" data-stringdex-js="stringdex-910ef755.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-1b37d467.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-0ec66560.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module llvm_enzyme</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../rustc_builtin_macros/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../../../rustc_builtin_macros/index.html">rustc_<wbr>builtin_<wbr>macros</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module llvm_<wbr>enzyme</a></h2><h3><a href="#functions">Module Items</a></h3><ul class="block"><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In rustc_<wbr>builtin_<wbr>macros::<wbr>autodiff</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">rustc_builtin_macros</a>::<wbr><a href="../index.html">autodiff</a></div><h1>Module <span>llvm_<wbr>enzyme</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/rustc_builtin_macros/autodiff.rs.html#6">Source</a> </span></div><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.assure_mut_ref.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::assure_mut_ref">assure_<wbr>mut_<wbr>ref</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.expand_forward.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::expand_forward">expand_<wbr>forward</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.expand_reverse.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::expand_reverse">expand_<wbr>reverse</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.expand_with_mode.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::expand_with_mode">expand_<wbr>with_<wbr>mode</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>We expand the autodiff macro to generate a new placeholder function which passes
type-checking and can be called by users. The function body of the placeholder function will
later be replaced on LLVM-IR level, so the design of the body is less important and for now
should just prevent early inlining and optimizations which alter the function signature.
The exact signature of the generated function depends on the configuration provided by the
user, but here is an example:</dd><dt><a class="fn" href="fn.extract_item_info.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::extract_item_info">extract_<wbr>item_<wbr>info</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.first_ident.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::first_ident">first_<wbr>ident</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.from_ast.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::from_ast">from_<wbr>ast</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.gen_enzyme_body.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::gen_enzyme_body">gen_<wbr>enzyme_<wbr>body</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>We only want this function to type-check, since we will replace the body
later on llvm level. Using <code>loop {}</code> does not cover all return types anymore,
so instead we manually build something that should pass the type checker.
We also add a inline_asm line, as one more barrier for rustc to prevent inlining
or const propagation. inline_asm will also triggers an Enzyme crash if due to another
bug would ever try to accidentally differentiate this placeholder function body.
Finally, we also add back_box usages of all input arguments, to prevent rustc
from optimizing any arguments away.</dd><dt><a class="fn" href="fn.gen_enzyme_decl.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::gen_enzyme_decl">gen_<wbr>enzyme_<wbr>decl</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.gen_primal_call.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::gen_primal_call">gen_<wbr>primal_<wbr>call</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.has_ret.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::has_ret">has_ret</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.init_body_helper.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::init_body_helper">init_<wbr>body_<wbr>helper</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.meta_item_inner_to_ts.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::meta_item_inner_to_ts">meta_<wbr>item_<wbr>inner_<wbr>to_<wbr>ts</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.name.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::name">name</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.outer_normal_attr.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::outer_normal_attr">outer_<wbr>normal_<wbr>attr</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.width.html" title="fn rustc_builtin_macros::autodiff::llvm_enzyme::width">width</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl></section></div></main></body></html>