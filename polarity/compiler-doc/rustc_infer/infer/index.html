<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `infer` mod in crate `rustc_infer`."><title>rustc_infer::infer - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rustc_infer" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-dev" data-channel="nightly" data-search-js="search-38ac1f3e.js" data-stringdex-js="stringdex-0e748618.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module infer</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../rustc_infer/index.html"><img class="rust-logo" src="../../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../../rustc_infer/index.html">rustc_<wbr>infer</a><span class="version">1.91.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module infer</a></h2><h3><a href="#reexports">Module Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li><li><a href="#derives" title="Derive Macros">Derive Macros</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate rustc_<wbr>infer</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">rustc_infer</a></div><h1>Module <span>infer</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/rustc_infer/infer/mod.rs.html#1-1646">Source</a> </span></div><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.DefineOpaqueTypes"><code>pub use at::<a class="enum" href="at/enum.DefineOpaqueTypes.html" title="enum rustc_infer::infer::at::DefineOpaqueTypes">DefineOpaqueTypes</a>;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="at/index.html" title="mod rustc_infer::infer::at">at</a></dt><dd>A nice interface for working with the infcx. The basic idea is to
do <code>infcx.at(cause, param_env)</code>, which sets the “cause” of the
operation as well as the surrounding parameter environment. Then
you can do something like <code>.sub(a, b)</code> or <code>.eq(a, b)</code> to create a
subtype or equality relationship respectively. The first argument
is always the “expected” output from the POV of diagnostics.</dd><dt><a class="mod" href="canonical/index.html" title="mod rustc_infer::infer::canonical">canonical</a></dt><dd><strong>Canonicalization</strong> is the key to constructing a query in the
middle of type inference. Ordinarily, it is not possible to store
types from type inference in query keys, because they contain
references to inference variables whose lifetimes are too short
and so forth. Canonicalizing a value T1 using <code>canonicalize_query</code>
produces two things:</dd><dt><a class="mod" href="context/index.html" title="mod rustc_infer::infer::context">context</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="free_regions/index.html" title="mod rustc_infer::infer::free_regions">free_<wbr>regions</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>This module handles the relationships between “free regions”, i.e., lifetime parameters.
Ordinarily, free regions are unrelated to one another, but they can be related via implied
or explicit bounds. In that case, we track the bounds using the <code>TransitiveRelation</code> type,
and use that to decide when one free region outlives another, and so forth.</dd><dt><a class="mod" href="freshen/index.html" title="mod rustc_infer::infer::freshen">freshen</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Freshening is the process of replacing unknown variables with fresh types. The idea is that
the type, after freshening, contains no inference variables but instead contains either a
value for each variable or fresh “arbitrary” types wherever a variable would have been.</dd><dt><a class="mod" href="lexical_region_resolve/index.html" title="mod rustc_infer::infer::lexical_region_resolve">lexical_<wbr>region_<wbr>resolve</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Lexical region resolution.</dd><dt><a class="mod" href="opaque_types/index.html" title="mod rustc_infer::infer::opaque_types">opaque_<wbr>types</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="outlives/index.html" title="mod rustc_infer::infer::outlives">outlives</a></dt><dd>Various code related to computing outlives relations.</dd><dt><a class="mod" href="projection/index.html" title="mod rustc_infer::infer::projection">projection</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="region_constraints/index.html" title="mod rustc_infer::infer::region_constraints">region_<wbr>constraints</a></dt><dd>See <code>README.md</code>.</dd><dt><a class="mod" href="relate/index.html" title="mod rustc_infer::infer::relate">relate</a></dt><dd>This module contains the definitions of most <code>TypeRelation</code>s in the type system
(except for some relations used for diagnostics and heuristics in the compiler).
As well as the implementation of <code>Relate</code> for interned things (<code>Ty</code>/<code>Const</code>/etc).</dd><dt><a class="mod" href="resolve/index.html" title="mod rustc_infer::infer::resolve">resolve</a></dt><dt><a class="mod" href="snapshot/index.html" title="mod rustc_infer::infer::snapshot">snapshot</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="type_variable/index.html" title="mod rustc_infer::infer::type_variable">type_<wbr>variable</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="mod" href="unify_key/index.html" title="mod rustc_infer::infer::unify_key">unify_<wbr>key</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.FixupError.html" title="struct rustc_infer::infer::FixupError">Fixup<wbr>Error</a></dt><dt><a class="struct" href="struct.InferCtxt.html" title="struct rustc_infer::infer::InferCtxt">Infer<wbr>Ctxt</a></dt><dt><a class="struct" href="struct.InferCtxtBuilder.html" title="struct rustc_infer::infer::InferCtxtBuilder">Infer<wbr>Ctxt<wbr>Builder</a></dt><dd>Used to configure inference contexts before their creation.</dd><dt><a class="struct" href="struct.InferCtxtInner.html" title="struct rustc_infer::infer::InferCtxtInner">Infer<wbr>Ctxt<wbr>Inner</a></dt><dd>This type contains all the things within <code>InferCtxt</code> that sit within a
<code>RefCell</code> and are involved with taking/rolling back snapshots. Snapshot
operations are hot enough that we want only one call to <code>borrow_mut</code> per
call to <code>start_snapshot</code> and <code>rollback_to</code>.</dd><dt><a class="struct" href="struct.InferOk.html" title="struct rustc_infer::infer::InferOk">InferOk</a></dt><dd><code>InferOk&lt;'tcx, ()&gt;</code> is used a lot. It may seem like a useless wrapper
around <code>PredicateObligations&lt;'tcx&gt;</code>, but it has one important property:
because <code>InferOk</code> is marked with <code>#[must_use]</code>, if you have a method
<code>InferCtxt::f</code> that returns <code>InferResult&lt;'tcx, ()&gt;</code> and you call it with
<code>infcx.f()?;</code> you’ll get a warning about the obligations being discarded
without use, which is probably unintentional and has been a source of bugs
in the past.</dd><dt><a class="struct" href="struct.InferenceLiteralEraser.html" title="struct rustc_infer::infer::InferenceLiteralEraser">Inference<wbr>Literal<wbr>Eraser</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dd>Replace <code>{integer}</code> with <code>i32</code> and <code>{float}</code> with <code>f64</code>.
Used only for diagnostics.</dd><dt><a class="struct" href="struct.OpaqueTypeStorage.html" title="struct rustc_infer::infer::OpaqueTypeStorage">Opaque<wbr>Type<wbr>Storage</a></dt><dt><a class="struct" href="struct.OpaqueTypeStorageEntries.html" title="struct rustc_infer::infer::OpaqueTypeStorageEntries">Opaque<wbr>Type<wbr>Storage<wbr>Entries</a></dt><dd>The number of entries in the opaque type storage at a given point.</dd><dt><a class="struct" href="struct.OpaqueTypeTable.html" title="struct rustc_infer::infer::OpaqueTypeTable">Opaque<wbr>Type<wbr>Table</a></dt><dt><a class="struct" href="struct.TypeFreshener.html" title="struct rustc_infer::infer::TypeFreshener">Type<wbr>Freshener</a></dt><dt><a class="struct" href="struct.TypeOutlivesConstraint.html" title="struct rustc_infer::infer::TypeOutlivesConstraint">Type<wbr>Outlives<wbr>Constraint</a></dt><dd>See the <code>region_obligations</code> field for more information.</dd><dt><a class="struct" href="struct.TypeTrace.html" title="struct rustc_infer::infer::TypeTrace">Type<wbr>Trace</a></dt><dd>The trace designates the path through inference that we took to
encounter an error or subtyping constraint.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.BoundRegionConversionTime.html" title="enum rustc_infer::infer::BoundRegionConversionTime">Bound<wbr>Region<wbr>Conversion<wbr>Time</a></dt><dd>Times when we replace bound regions with existentials:</dd><dt><a class="enum" href="enum.NllRegionVariableOrigin.html" title="enum rustc_infer::infer::NllRegionVariableOrigin">NllRegion<wbr>Variable<wbr>Origin</a></dt><dt><a class="enum" href="enum.RegionResolutionError.html" title="enum rustc_infer::infer::RegionResolutionError">Region<wbr>Resolution<wbr>Error</a></dt><dt><a class="enum" href="enum.RegionVariableOrigin.html" title="enum rustc_infer::infer::RegionVariableOrigin">Region<wbr>Variable<wbr>Origin</a></dt><dd>Reasons to create a region inference variable.</dd><dt><a class="enum" href="enum.StructurallyRelateAliases.html" title="enum rustc_infer::infer::StructurallyRelateAliases">Structurally<wbr>Relate<wbr>Aliases</a></dt><dd>Whether aliases should be related structurally or not. Used
to adjust the behavior of generalization and combine.</dd><dt><a class="enum" href="enum.SubregionOrigin.html" title="enum rustc_infer::infer::SubregionOrigin">Subregion<wbr>Origin</a></dt><dd>The origin of a <code>r1 &lt;= r2</code> constraint.</dd><dt><a class="enum" href="enum.TyOrConstInferVar.html" title="enum rustc_infer::infer::TyOrConstInferVar">TyOr<wbr>Const<wbr>Infer<wbr>Var</a></dt><dd>Helper for <a href="struct.InferCtxt.html#method.ty_or_const_infer_var_changed" title="method rustc_infer::infer::InferCtxt::ty_or_const_infer_var_changed">InferCtxt::ty_or_const_infer_var_changed</a> (see comment on that), currently
used only for <code>traits::fulfill</code>’s list of <code>stalled_on</code> inference variables.</dd><dt><a class="enum" href="enum.ValuePairs.html" title="enum rustc_infer::infer::ValuePairs">Value<wbr>Pairs</a></dt><dd>See the <code>error_reporting</code> module for more details.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.PredicateEmittingRelation.html" title="trait rustc_infer::infer::PredicateEmittingRelation">Predicate<wbr>Emitting<wbr>Relation</a></dt><dt><a class="trait" href="trait.TyCtxtInferExt.html" title="trait rustc_infer::infer::TyCtxtInferExt">TyCtxt<wbr>Infer<wbr>Ext</a></dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.FixupResult.html" title="type rustc_infer::infer::FixupResult">Fixup<wbr>Result</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt><dt><a class="type" href="type.InferResult.html" title="type rustc_infer::infer::InferResult">Infer<wbr>Result</a></dt><dt><a class="type" href="type.UnificationTable.html" title="type rustc_infer::infer::UnificationTable">Unification<wbr>Table</a><span title="Restricted Visibility">&nbsp;🔒</span> </dt></dl><h2 id="derives" class="section-header">Derive Macros<a href="#derives" class="anchor">§</a></h2><dl class="item-table"><dt><a class="derive" href="derive.TypeFoldable.html" title="derive rustc_infer::infer::TypeFoldable">Type<wbr>Foldable</a></dt><dd>Derives <code>TypeFoldable</code> for the annotated <code>struct</code> or <code>enum</code> (<code>union</code> is not supported).</dd><dt><a class="derive" href="derive.TypeVisitable.html" title="derive rustc_infer::infer::TypeVisitable">Type<wbr>Visitable</a></dt><dd>Derives <code>TypeVisitable</code> for the annotated <code>struct</code> or <code>enum</code> (<code>union</code> is not supported).</dd></dl></section></div></main></body></html>