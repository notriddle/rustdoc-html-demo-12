<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Operator expressions - The Rust Reference</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-3865ffda.css">
        <link rel="stylesheet" href="../css/general-4c35105a.css">
        <link rel="stylesheet" href="../css/chrome-c0e702bf.css">
        <link rel="stylesheet" href="../css/print-ad67d350.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome-799aeb25.css">
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight-56612340.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/reference-94a8e8ad.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-00f0d4d1.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-4adb5027.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Reference</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/reference/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/reference/edit/master/src/expressions/operator-expr.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="rule" id="r-expr.operator"><a class="rule-link" href="#r-expr.operator" title="expr.operator"><span>[expr<wbr>.operator]</span/></a>
</div>
<h1 id="operator-expressions"><a class="header" href="#operator-expressions">Operator expressions</a></h1>
<div class="rule" id="r-expr.operator.syntax"><a class="rule-link" href="#r-expr.operator.syntax" title="expr.operator.syntax"><span>[expr<wbr>.operator<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-OperatorExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-OperatorExpression">OperatorExpression</a></span> → <br />
      <span class="grammar-text"><a href="operator-expr.html#grammar-BorrowExpression">BorrowExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-DereferenceExpression">DereferenceExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-TryPropagationExpression">TryPropagationExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-NegationExpression">NegationExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-ArithmeticOrLogicalExpression">ArithmeticOrLogicalExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-ComparisonExpression">ComparisonExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-LazyBooleanExpression">LazyBooleanExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-TypeCastExpression">TypeCastExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-AssignmentExpression">AssignmentExpression</a></span> <br />
    | <span class="grammar-text"><a href="operator-expr.html#grammar-CompoundAssignmentExpression">CompoundAssignmentExpression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 378px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-OperatorExpression"><svg class="railroad" viewBox="0 0 378 371" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-OperatorExpression">
<text class="comment" x="78" y="25">
OperatorExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 148 0 h 136 m -65 0 l -5 -5 m 0 10 l 5 -5 m 65 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-BorrowExpression">
<g class="nonterminal">
<rect height="22" width="148" x="59" y="42"/>
<text x="133" y="58">
BorrowExpression</text>
</g>
</a>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 284 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 33 m 284 0 v -33"/>
<path d=" M 47 107 v 33 m 284 0 v -33"/>
<path d=" M 47 140 v 33 m 284 0 v -33"/>
<path d=" M 47 173 v 33 m 284 0 v -33"/>
<path d=" M 47 206 v 33 m 284 0 v -33"/>
<path d=" M 47 239 v 33 m 284 0 v -33"/>
<path d=" M 47 272 v 33 m 284 0 v -33"/>
<path d=" M 47 305 v 33 m 284 0 v -33"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 196 0 h 64 m -29 0 l -5 -5 m 0 10 l 5 -5 m 29 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-DereferenceExpression">
<g class="nonterminal">
<rect height="22" width="196" x="59" y="75"/>
<text x="157" y="91">
DereferenceExpression</text>
</g>
</a>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 220 0 h 40 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-TryPropagationExpression">
<g class="nonterminal">
<rect height="22" width="220" x="59" y="108"/>
<text x="169" y="124">
TryPropagationExpression</text>
</g>
</a>
</g>
<path d=" M 47 140 v 0 a 12 12 0 0 0 12 12 m 164 0 h 96 m -45 0 l -5 -5 m 0 10 l 5 -5 m 45 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-NegationExpression">
<g class="nonterminal">
<rect height="22" width="164" x="59" y="141"/>
<text x="141" y="157">
NegationExpression</text>
</g>
</a>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 260 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-ArithmeticOrLogicalExpression">
<g class="nonterminal">
<rect height="22" width="260" x="59" y="174"/>
<text x="189" y="190">
ArithmeticOrLogicalExpression</text>
</g>
</a>
</g>
<path d=" M 47 206 v 0 a 12 12 0 0 0 12 12 m 188 0 h 72 m -33 0 l -5 -5 m 0 10 l 5 -5 m 33 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-ComparisonExpression">
<g class="nonterminal">
<rect height="22" width="188" x="59" y="207"/>
<text x="153" y="223">
ComparisonExpression</text>
</g>
</a>
</g>
<path d=" M 47 239 v 0 a 12 12 0 0 0 12 12 m 196 0 h 64 m -29 0 l -5 -5 m 0 10 l 5 -5 m 29 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-LazyBooleanExpression">
<g class="nonterminal">
<rect height="22" width="196" x="59" y="240"/>
<text x="157" y="256">
LazyBooleanExpression</text>
</g>
</a>
</g>
<path d=" M 47 272 v 0 a 12 12 0 0 0 12 12 m 164 0 h 96 m -45 0 l -5 -5 m 0 10 l 5 -5 m 45 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-TypeCastExpression">
<g class="nonterminal">
<rect height="22" width="164" x="59" y="273"/>
<text x="141" y="289">
TypeCastExpression</text>
</g>
</a>
</g>
<path d=" M 47 305 v 0 a 12 12 0 0 0 12 12 m 188 0 h 72 m -33 0 l -5 -5 m 0 10 l 5 -5 m 33 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="operator-expr.html#railroad-AssignmentExpression">
<g class="nonterminal">
<rect height="22" width="188" x="59" y="306"/>
<text x="153" y="322">
AssignmentExpression</text>
</g>
</a>
</g>
<path d=" M 47 338 v 0 a 12 12 0 0 0 12 12 m 252 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<a class="link" xlink:href="operator-expr.html#railroad-CompoundAssignmentExpression">
<g class="nonterminal">
<rect height="22" width="252" x="59" y="339"/>
<text x="185" y="355">
CompoundAssignmentExpression</text>
</g>
</a>
</g>
<path d=" M 353 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 343 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.operator.intro"><a class="rule-link" href="#r-expr.operator.intro" title="expr.operator.intro"><span>[expr<wbr>.operator<wbr>.intro]</span/></a>
</div>
<p>Operators are defined for built in types by the Rust language.</p>
<div class="rule" id="r-expr.operator.trait"><a class="rule-link" href="#r-expr.operator.trait" title="expr.operator.trait"><span>[expr<wbr>.operator<wbr>.trait]</span/></a>
</div>
<p>Many of the following operators can also be overloaded using traits in <code>std::ops</code> or <code>std::cmp</code>.</p>
<div class="rule" id="r-expr.operator.int-overflow"><a class="rule-link" href="#r-expr.operator.int-overflow" title="expr.operator.int-overflow"><span>[expr<wbr>.operator<wbr>.int-overflow]</span/></a>
</div>
<h2 id="overflow"><a class="header" href="#overflow">Overflow</a></h2>
<div class="rule" id="r-expr.operator.int-overflow.intro"><a class="rule-link" href="#r-expr.operator.int-overflow.intro" title="expr.operator.int-overflow.intro"><span>[expr<wbr>.operator<wbr>.int-overflow<wbr>.intro]</span/></a>
</div>
<p>Integer operators will panic when they overflow when compiled in debug mode.
The <code>-C debug-assertions</code> and <code>-C overflow-checks</code> compiler flags can be used to control this more directly.
The following things are considered to be overflow:</p>
<div class="rule" id="r-expr.operator.int-overflow.binary-arith"><a class="rule-link" href="#r-expr.operator.int-overflow.binary-arith" title="expr.operator.int-overflow.binary-arith"><span>[expr<wbr>.operator<wbr>.int-overflow<wbr>.binary-arith]</span/></a>
</div>
<ul>
<li>When <code>+</code>, <code>*</code> or binary <code>-</code> create a value greater than the maximum value, or less than the minimum value that can be stored.</li>
</ul>
<div class="rule" id="r-expr.operator.int-overflow.unary-neg"><a class="rule-link" href="#r-expr.operator.int-overflow.unary-neg" title="expr.operator.int-overflow.unary-neg"><span>[expr<wbr>.operator<wbr>.int-overflow<wbr>.unary-neg]</span/></a>
</div>
<ul>
<li>Applying unary <code>-</code> to the most negative value of any signed integer type, unless the operand is a <a href="literal-expr.html#integer-literal-expressions">literal expression</a> (or a literal expression standing alone inside one or more <a href="grouped-expr.html">grouped expressions</a>).</li>
</ul>
<div class="rule" id="r-expr.operator.int-overflow.div"><a class="rule-link" href="#r-expr.operator.int-overflow.div" title="expr.operator.int-overflow.div"><span>[expr<wbr>.operator<wbr>.int-overflow<wbr>.div]</span/></a>
</div>
<ul>
<li>Using <code>/</code> or <code>%</code>, where the left-hand argument is the smallest integer of a signed integer type and the right-hand argument is <code>-1</code>.
These checks occur even when <code>-C overflow-checks</code> is disabled, for legacy reasons.</li>
</ul>
<div class="rule" id="r-expr.operator.int-overflow.shift"><a class="rule-link" href="#r-expr.operator.int-overflow.shift" title="expr.operator.int-overflow.shift"><span>[expr<wbr>.operator<wbr>.int-overflow<wbr>.shift]</span/></a>
</div>
<ul>
<li>Using <code>&lt;&lt;</code> or <code>&gt;&gt;</code> where the right-hand argument is greater than or equal to the number of bits in the type of the left-hand argument, or is negative.</li>
</ul>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>The exception for literal expressions behind unary <code>-</code> means that forms such as <code>-128_i8</code> or <code>let j: i8 = -(128)</code> never cause a panic and have the expected value of -128.</p>
<p>In these cases, the literal expression already has the most negative value for its type (for example, <code>128_i8</code> has the value -128) because integer literals are truncated to their type per the description in <a href="literal-expr.html#integer-literal-expressions">Integer literal expressions</a>.</p>
<p>Negation of these most negative values leaves the value unchanged due to two’s complement overflow conventions.</p>
<p>In <code>rustc</code>, these most negative expressions are also ignored by the <code>overflowing_literals</code> lint check.</p>
</blockquote>
</div>
<div class="rule" id="r-expr.operator.borrow"><a class="rule-link" href="#r-expr.operator.borrow" title="expr.operator.borrow"><span>[expr<wbr>.operator<wbr>.borrow]</span/></a>
</div>
<h2 id="borrow-operators"><a class="header" href="#borrow-operators">Borrow operators</a></h2>
<div class="rule" id="r-expr.operator.borrow.syntax"><a class="rule-link" href="#r-expr.operator.borrow.syntax" title="expr.operator.borrow.syntax"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-BorrowExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-BorrowExpression">BorrowExpression</a></span> → <br />
      ( <span class="grammar-literal">&amp;</span> | <span class="grammar-literal">&amp;&amp;</span> ) <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | ( <span class="grammar-literal">&amp;</span> | <span class="grammar-literal">&amp;&amp;</span> ) <span class="grammar-literal">mut</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | ( <span class="grammar-literal">&amp;</span> | <span class="grammar-literal">&amp;&amp;</span> ) <span class="grammar-literal">raw</span> <span class="grammar-literal">const</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | ( <span class="grammar-literal">&amp;</span> | <span class="grammar-literal">&amp;&amp;</span> ) <span class="grammar-literal">raw</span> <span class="grammar-literal">mut</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 436px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-BorrowExpression"><svg class="railroad" viewBox="0 0 436 305" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-BorrowExpression">
<text class="comment" x="71" y="25">
BorrowExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 194 0 h 148 m -71 0 l -5 -5 m 0 10 l 5 -5 m 71 0"/>
<g class="sequence">
<g class="choice">
<path d=" M 59 53 h 24 m 28 0 h 32"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="83" y="42"/>
<text x="97" y="58">
&amp;</text>
</g>
<path d=" M 59 53 a 12 12 0 0 1 12 12 v 9 m 60 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 71 74 v 0 a 12 12 0 0 0 12 12 m 36 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="83" y="75"/>
<text x="101" y="91">
&amp;&amp;</text>
</g>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="153" y="42"/>
<text x="203" y="58">
Expression</text>
</g>
</a>
<path d=" M 143 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 42 m 342 0 v -42 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 107 v 66 m 0 -30 l -5 -5 m 10 0 l -5 5 m 0 30 m 342 0 v -66 m 0 36 l -5 5 m 10 0 l -5 -5 m 0 -36"/>
<path d=" M 47 173 v 66 m 0 -30 l -5 -5 m 10 0 l -5 5 m 0 30 m 342 0 v -66 m 0 36 l -5 5 m 10 0 l -5 -5 m 0 -36"/>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 248 0 h 70 m -32 0 l -5 -5 m 0 10 l 5 -5 m 32 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<g class="choice">
<path d=" M 59 119 h 24 m 28 0 h 32"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="83" y="108"/>
<text x="97" y="124">
&amp;</text>
</g>
<path d=" M 59 119 a 12 12 0 0 1 12 12 v 9 m 60 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 71 140 v 0 a 12 12 0 0 0 12 12 m 36 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="83" y="141"/>
<text x="101" y="157">
&amp;&amp;</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="153" y="108"/>
<text x="175" y="124">
mut</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="108"/>
<text x="257" y="124">
Expression</text>
</g>
</a>
<path d=" M 143 119 h 10"/>
<path d=" M 197 119 h 10"/>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 318 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<g class="choice">
<path d=" M 59 185 h 24 m 28 0 h 32"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="83" y="174"/>
<text x="97" y="190">
&amp;</text>
</g>
<path d=" M 59 185 a 12 12 0 0 1 12 12 v 9 m 60 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 71 206 v 0 a 12 12 0 0 0 12 12 m 36 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="83" y="207"/>
<text x="101" y="223">
&amp;&amp;</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="153" y="174"/>
<text x="175" y="190">
raw</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="60" x="207" y="174"/>
<text x="237" y="190">
const</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="277" y="174"/>
<text x="327" y="190">
Expression</text>
</g>
</a>
<path d=" M 143 185 h 10"/>
<path d=" M 197 185 h 10"/>
<path d=" M 267 185 h 10"/>
</g>
<path d=" M 47 239 v 0 a 12 12 0 0 0 12 12 m 302 0 h 16 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<g class="choice">
<path d=" M 59 251 h 24 m 28 0 h 32"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="83" y="240"/>
<text x="97" y="256">
&amp;</text>
</g>
<path d=" M 59 251 a 12 12 0 0 1 12 12 v 9 m 60 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 71 272 v 0 a 12 12 0 0 0 12 12 m 36 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="83" y="273"/>
<text x="101" y="289">
&amp;&amp;</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="153" y="240"/>
<text x="175" y="256">
raw</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="207" y="240"/>
<text x="229" y="256">
mut</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="261" y="240"/>
<text x="311" y="256">
Expression</text>
</g>
</a>
<path d=" M 143 251 h 10"/>
<path d=" M 197 251 h 10"/>
<path d=" M 251 251 h 10"/>
</g>
</g>
<path d=" M 411 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 401 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.operator.borrow.intro"><a class="rule-link" href="#r-expr.operator.borrow.intro" title="expr.operator.borrow.intro"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.intro]</span/></a>
</div>
<p>The <code>&amp;</code> (shared borrow) and <code>&amp;mut</code> (mutable borrow) operators are unary prefix operators.</p>
<div class="rule" id="r-expr.operator.borrow.result"><a class="rule-link" href="#r-expr.operator.borrow.result" title="expr.operator.borrow.result"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.result]</span/></a>
</div>
<p>When applied to a <a href="../expressions.html#place-expressions-and-value-expressions">place expression</a>, this expressions produces a reference (pointer) to the location that the value refers to.</p>
<div class="rule" id="r-expr.operator.borrow.lifetime"><a class="rule-link" href="#r-expr.operator.borrow.lifetime" title="expr.operator.borrow.lifetime"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.lifetime]</span/></a>
</div>
<p>The memory location is also placed into a borrowed state for the duration of the reference.
For a shared borrow (<code>&amp;</code>), this implies that the place may not be mutated, but it may be read or shared again.
For a mutable borrow (<code>&amp;mut</code>), the place may not be accessed in any way until the borrow expires.</p>
<div class="rule" id="r-expr.operator.borrow.mut"><a class="rule-link" href="#r-expr.operator.borrow.mut" title="expr.operator.borrow.mut"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.mut]</span/></a>
</div>
<p><code>&amp;mut</code> evaluates its operand in a mutable place expression context.</p>
<div class="rule" id="r-expr.operator.borrow.temporary"><a class="rule-link" href="#r-expr.operator.borrow.temporary" title="expr.operator.borrow.temporary"><span>[expr<wbr>.operator<wbr>.borrow<wbr>.temporary]</span/></a>
</div>
<p>If the <code>&amp;</code> or <code>&amp;mut</code> operators are applied to a <a href="../expressions.html#place-expressions-and-value-expressions">value expression</a>, then a <a href="../expressions.html#temporaries">temporary value</a> is created.</p>
<p>These operators cannot be overloaded.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>{
    // a temporary with value 7 is created that lasts for this scope.
    let shared_reference = &amp;7;
}
let mut array = [-2, 3, 9];
{
    // Mutably borrows `array` for this scope.
    // `array` may only be used through `mutable_reference`.
    let mutable_reference = &amp;mut array;
}
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.borrow.and-and-syntax"><a class="rule-link" href="#r-expr.borrow.and-and-syntax" title="expr.borrow.and-and-syntax"><span>[expr<wbr>.borrow<wbr>.and-and-syntax]</span/></a>
</div>
<p>Even though <code>&amp;&amp;</code> is a single token (<a href="#lazy-boolean-operators">the lazy ‘and’ operator</a>), when used in the context of borrow expressions it works as two borrows:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// same meanings:
let a = &amp;&amp;  10;
let a = &amp; &amp; 10;

// same meanings:
let a = &amp;&amp;&amp;&amp;  mut 10;
let a = &amp;&amp; &amp;&amp; mut 10;
let a = &amp; &amp; &amp; &amp; mut 10;
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.borrow.raw"><a class="rule-link" href="#r-expr.borrow.raw" title="expr.borrow.raw"><span>[expr<wbr>.borrow<wbr>.raw]</span/></a>
</div>
<h3 id="raw-borrow-operators"><a class="header" href="#raw-borrow-operators">Raw borrow operators</a></h3>
<div class="rule" id="r-expr.borrow.raw.intro"><a class="rule-link" href="#r-expr.borrow.raw.intro" title="expr.borrow.raw.intro"><span>[expr<wbr>.borrow<wbr>.raw<wbr>.intro]</span/></a>
</div>
<p><code>&amp;raw const</code> and <code>&amp;raw mut</code> are the <em>raw borrow operators</em>.</p>
<div class="rule" id="r-expr.borrow.raw.place"><a class="rule-link" href="#r-expr.borrow.raw.place" title="expr.borrow.raw.place"><span>[expr<wbr>.borrow<wbr>.raw<wbr>.place]</span/></a>
</div>
<p>The operand expression of these operators is evaluated in place expression context.</p>
<div class="rule" id="r-expr.borrow.raw.result"><a class="rule-link" href="#r-expr.borrow.raw.result" title="expr.borrow.raw.result"><span>[expr<wbr>.borrow<wbr>.raw<wbr>.result]</span/></a>
</div>
<p><code>&amp;raw const expr</code> then creates a const raw pointer of type <code>*const T</code> to the given place, and <code>&amp;raw mut expr</code> creates a mutable raw pointer of type <code>*mut T</code>.</p>
<div class="rule" id="r-expr.borrow.raw.invalid-ref"><a class="rule-link" href="#r-expr.borrow.raw.invalid-ref" title="expr.borrow.raw.invalid-ref"><span>[expr<wbr>.borrow<wbr>.raw<wbr>.invalid-ref]</span/></a>
</div>
<p>The raw borrow operators must be used instead of a borrow operator whenever the place expression could evaluate to a place that is not properly aligned or does not store a valid value as determined by its type, or whenever creating a reference would introduce incorrect aliasing assumptions.
In those situations, using a borrow operator would cause <a href="../behavior-considered-undefined.html">undefined behavior</a> by creating an invalid reference, but a raw pointer may still be constructed.</p>
<p>The following is an example of creating a raw pointer to an unaligned place through a <code>packed</code> struct:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[repr(packed)]
struct Packed {
    f1: u8,
    f2: u16,
}

let packed = Packed { f1: 1, f2: 2 };
// `&amp;packed.f2` would create an unaligned reference, and thus be undefined behavior!
let raw_f2 = &amp;raw const packed.f2;
assert_eq!(unsafe { raw_f2.read_unaligned() }, 2);
<span class="boring">}</span></code></pre></pre>
<p>The following is an example of creating a raw pointer to a place that does not contain a valid value:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::mem::MaybeUninit;

struct Demo {
    field: bool,
}

let mut uninit = MaybeUninit::&lt;Demo&gt;::uninit();
// `&amp;uninit.as_mut().field` would create a reference to an uninitialized `bool`,
// and thus be undefined behavior!
let f1_ptr = unsafe { &amp;raw mut (*uninit.as_mut_ptr()).field };
unsafe { f1_ptr.write(true); }
let init = unsafe { uninit.assume_init() };
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.deref"><a class="rule-link" href="#r-expr.deref" title="expr.deref"><span>[expr<wbr>.deref]</span/></a>
</div>
<h2 id="the-dereference-operator"><a class="header" href="#the-dereference-operator">The dereference operator</a></h2>
<div class="rule" id="r-expr.deref.syntax"><a class="rule-link" href="#r-expr.deref.syntax" title="expr.deref.syntax"><span>[expr<wbr>.deref<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-DereferenceExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-DereferenceExpression">DereferenceExpression</a></span> → <span class="grammar-literal">*</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 208px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-DereferenceExpression"><svg class="railroad" viewBox="0 0 208 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-DereferenceExpression">
<text class="comment" x="92" y="25">
DereferenceExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="35" y="42"/>
<text x="49" y="58">
*</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="73" y="42"/>
<text x="123" y="58">
Expression</text>
</g>
</a>
<path d=" M 63 53 h 10"/>
</g>
<path d=" M 183 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 173 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.deref.intro"><a class="rule-link" href="#r-expr.deref.intro" title="expr.deref.intro"><span>[expr<wbr>.deref<wbr>.intro]</span/></a>
</div>
<p>The <code>*</code> (dereference) operator is also a unary prefix operator.</p>
<div class="rule" id="r-expr.deref.result"><a class="rule-link" href="#r-expr.deref.result" title="expr.deref.result"><span>[expr<wbr>.deref<wbr>.result]</span/></a>
</div>
<p>When applied to a <a href="../types/pointer.html">pointer</a> it denotes the pointed-to location.</p>
<div class="rule" id="r-expr.deref.mut"><a class="rule-link" href="#r-expr.deref.mut" title="expr.deref.mut"><span>[expr<wbr>.deref<wbr>.mut]</span/></a>
</div>
<p>If the expression is of type <code>&amp;mut T</code> or <code>*mut T</code>, and is either a local variable, a (nested) field of a local variable or is a mutable <a href="../expressions.html#place-expressions-and-value-expressions">place expression</a>, then the resulting memory location can be assigned to.</p>
<div class="rule" id="r-expr.deref.safety"><a class="rule-link" href="#r-expr.deref.safety" title="expr.deref.safety"><span>[expr<wbr>.deref<wbr>.safety]</span/></a>
</div>
<p>Dereferencing a raw pointer requires <code>unsafe</code>.</p>
<div class="rule" id="r-expr.deref.traits"><a class="rule-link" href="#r-expr.deref.traits" title="expr.deref.traits"><span>[expr<wbr>.deref<wbr>.traits]</span/></a>
</div>
<p>On non-pointer types <code>*x</code> is equivalent to <code>*std::ops::Deref::deref(&amp;x)</code> in an <a href="../expressions.html#mutability">immutable place expression context</a> and <code>*std::ops::DerefMut::deref_mut(&amp;mut x)</code> in a mutable place expression context.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = &amp;7;
assert_eq!(*x, 7);
let y = &amp;mut 9;
*y = 11;
assert_eq!(*y, 11);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.try"><a class="rule-link" href="#r-expr.try" title="expr.try"><span>[expr<wbr>.try]</span/></a>
</div>
<h2 id="the-try-propagation-expression"><a class="header" href="#the-try-propagation-expression">The try propagation expression</a></h2>
<div class="rule" id="r-expr.try.syntax"><a class="rule-link" href="#r-expr.try.syntax" title="expr.try.syntax"><span>[expr<wbr>.try<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-TryPropagationExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-TryPropagationExpression">TryPropagationExpression</a></span> → <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">?</span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 208px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-TryPropagationExpression"><svg class="railroad" viewBox="0 0 208 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-TryPropagationExpression">
<text class="comment" x="102" y="25">
TryPropagationExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="35" y="42"/>
<text x="85" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="145" y="42"/>
<text x="159" y="58">
?</text>
</g>
<path d=" M 135 53 h 10"/>
</g>
<path d=" M 183 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 173 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.try.intro"><a class="rule-link" href="#r-expr.try.intro" title="expr.try.intro"><span>[expr<wbr>.try<wbr>.intro]</span/></a>
</div>
<p>The try propagation expression uses the value of the inner expression and the <a href="../../core/ops/try_trait/trait.Try.html"><code>Try</code></a> trait to decide whether to produce a value, and if so, what value to produce, or whether to return a value to the caller, and if so, what value to return.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::num::ParseIntError;
</span>fn try_to_parse() -&gt; Result&lt;i32, ParseIntError&gt; {
    let x: i32 = "123".parse()?; // `x` is `123`.
    let y: i32 = "24a".parse()?; // Returns an `Err()` immediately.
    Ok(x + y)                    // Doesn't run.
}

let res = try_to_parse();
println!("{res:?}");
<span class="boring">assert!(res.is_err())
</span><span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn try_option_some() -&gt; Option&lt;u8&gt; {
    let val = Some(1)?;
    Some(val)
}
assert_eq!(try_option_some(), Some(1));

fn try_option_none() -&gt; Option&lt;u8&gt; {
    let val = None?;
    Some(val)
}
assert_eq!(try_option_none(), None);
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust edition2024">use std::ops::ControlFlow;

pub struct TreeNode&lt;T&gt; {
    value: T,
    left: Option&lt;Box&lt;TreeNode&lt;T&gt;&gt;&gt;,
    right: Option&lt;Box&lt;TreeNode&lt;T&gt;&gt;&gt;,
}

impl&lt;T&gt; TreeNode&lt;T&gt; {
    pub fn traverse_inorder&lt;B&gt;(&amp;self, f: &amp;mut impl FnMut(&amp;T) -&gt; ControlFlow&lt;B&gt;) -&gt; ControlFlow&lt;B&gt; {
        if let Some(left) = &amp;self.left {
            left.traverse_inorder(f)?;
        }
        f(&amp;self.value)?;
        if let Some(right) = &amp;self.right {
            right.traverse_inorder(f)?;
        }
        ControlFlow::Continue(())
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let n = TreeNode {
</span><span class="boring">        value: 1,
</span><span class="boring">        left: Some(Box::new(TreeNode{value: 2, left: None, right: None})),
</span><span class="boring">        right: None,
</span><span class="boring">    };
</span><span class="boring">    let v = n.traverse_inorder(&amp;mut |t| {
</span><span class="boring">        if *t == 2 {
</span><span class="boring">            ControlFlow::Break("found")
</span><span class="boring">        } else {
</span><span class="boring">            ControlFlow::Continue(())
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">    assert_eq!(v, ControlFlow::Break("found"));
</span><span class="boring">}</span></code></pre></pre>
</blockquote>
</div>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>The <a href="../../core/ops/try_trait/trait.Try.html"><code>Try</code></a> trait is currently unstable, and thus cannot be implemented for user types.</p>
<p>The try propagation expression is currently roughly equivalent to:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">#![ feature(try_trait_v2) ]
</span><span class="boring">fn example() -&gt; Result&lt;(), ()&gt; {
</span><span class="boring">let expr = Ok(());
</span>match core::ops::Try::branch(expr) {
    core::ops::ControlFlow::Continue(val) =&gt; val,
    core::ops::ControlFlow::Break(residual) =&gt;
        return core::ops::FromResidual::from_residual(residual),
}
<span class="boring">Ok(())
</span><span class="boring">}
</span><span class="boring">}</span></code></pre></pre>
</blockquote>
</div>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>The try propagation operator is sometimes called <em>the question mark operator</em>, <em>the <code>?</code> operator</em>, or <em>the try operator</em>.</p>
</blockquote>
</div>
<div class="rule" id="r-expr.try.restricted-types"><a class="rule-link" href="#r-expr.try.restricted-types" title="expr.try.restricted-types"><span>[expr<wbr>.try<wbr>.restricted-types]</span/></a>
</div>
<p>The try propagation operator can be applied to expressions with the type of:</p>
<ul>
<li><a href="../../core/result/enum.Result.html"><code>Result&lt;T, E&gt;</code></a>
<ul>
<li><code>Result::Ok(val)</code> evaluates to <code>val</code>.</li>
<li><code>Result::Err(e)</code> returns <code>Result::Err(From::from(e))</code>.</li>
</ul>
</li>
<li><a href="../../core/option/enum.Option.html"><code>Option&lt;T&gt;</code></a>
<ul>
<li><code>Option::Some(val)</code> evaluates to <code>val</code>.</li>
<li><code>Option::None</code> returns <code>Option::None</code>.</li>
</ul>
</li>
<li><a href="../../core/ops/control_flow/enum.ControlFlow.html"><code>ControlFlow&lt;B, C&gt;</code></a>
<ul>
<li><code>ControlFlow::Continue(c)</code> evaluates to <code>c</code>.</li>
<li><code>ControlFlow::Break(b)</code> returns <code>ControlFlow::Break(b)</code>.</li>
</ul>
</li>
<li><a href="../../core/task/poll/enum.Poll.html"><code>Poll&lt;Result&lt;T, E&gt;&gt;</code></a>
<ul>
<li><code>Poll::Ready(Ok(val))</code> evaluates to <code>Poll::Ready(val)</code>.</li>
<li><code>Poll::Ready(Err(e))</code> returns <code>Poll::Ready(Err(From::from(e)))</code>.</li>
<li><code>Poll::Pending</code> evaluates to <code>Poll::Pending</code>.</li>
</ul>
</li>
<li><a href="../../core/task/poll/enum.Poll.html"><code>Poll&lt;Option&lt;Result&lt;T, E&gt;&gt;&gt;</code></a>
<ul>
<li><code>Poll::Ready(Some(Ok(val)))</code> evaluates to <code>Poll::Ready(Some(val))</code>.</li>
<li><code>Poll::Ready(Some(Err(e)))</code> returns <code>Poll::Ready(Some(Err(From::from(e))))</code>.</li>
<li><code>Poll::Ready(None)</code> evaluates to <code>Poll::Ready(None)</code>.</li>
<li><code>Poll::Pending</code> evaluates to <code>Poll::Pending</code>.</li>
</ul>
</li>
</ul>
<div class="rule" id="r-expr.negate"><a class="rule-link" href="#r-expr.negate" title="expr.negate"><span>[expr<wbr>.negate]</span/></a>
</div>
<h2 id="negation-operators"><a class="header" href="#negation-operators">Negation operators</a></h2>
<div class="rule" id="r-expr.negate.syntax"><a class="rule-link" href="#r-expr.negate.syntax" title="expr.negate.syntax"><span>[expr<wbr>.negate<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-NegationExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-NegationExpression">NegationExpression</a></span> → <br />
      <span class="grammar-literal">-</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-literal">!</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 256px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-NegationExpression"><svg class="railroad" viewBox="0 0 256 107" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-NegationExpression">
<text class="comment" x="78" y="25">
NegationExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 138 0 h 24"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="42"/>
<text x="73" y="58">
-</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="97" y="42"/>
<text x="147" y="58">
Expression</text>
</g>
</a>
<path d=" M 87 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 162 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 138 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="75"/>
<text x="73" y="91">
!</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="97" y="75"/>
<text x="147" y="91">
Expression</text>
</g>
</a>
<path d=" M 87 86 h 10"/>
</g>
</g>
<path d=" M 231 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 221 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.negate.intro"><a class="rule-link" href="#r-expr.negate.intro" title="expr.negate.intro"><span>[expr<wbr>.negate<wbr>.intro]</span/></a>
</div>
<p>These are the last two unary operators.</p>
<div class="rule" id="r-expr.negate.results"><a class="rule-link" href="#r-expr.negate.results" title="expr.negate.results"><span>[expr<wbr>.negate<wbr>.results]</span/></a>
</div>
<p>This table summarizes the behavior of them on primitive types and which traits are used to overload these operators for other types.
Remember that signed integers are always represented using two’s complement.
The operands of all of these operators are evaluated in <a href="../expressions.html#place-expressions-and-value-expressions">value expression context</a> so are moved or copied.</p>
<div class="table-wrapper"><table><thead><tr><th>Symbol</th><th>Integer</th><th><code>bool</code></th><th>Floating Point</th><th>Overloading Trait</th></tr></thead><tbody>
<tr><td><code>-</code></td><td>Negation*</td><td></td><td>Negation</td><td><code>std::ops::Neg</code></td></tr>
<tr><td><code>!</code></td><td>Bitwise NOT</td><td><a href="../types/boolean.html#logical-not">Logical NOT</a></td><td></td><td><code>std::ops::Not</code></td></tr>
</tbody></table>
</div>
<p>* Only for signed integer types.</p>
<p>Here are some example of these operators</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 6;
assert_eq!(-x, -6);
assert_eq!(!x, -7);
assert_eq!(true, !false);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.arith-logic"><a class="rule-link" href="#r-expr.arith-logic" title="expr.arith-logic"><span>[expr<wbr>.arith-logic]</span/></a>
</div>
<h2 id="arithmetic-and-logical-binary-operators"><a class="header" href="#arithmetic-and-logical-binary-operators">Arithmetic and Logical Binary Operators</a></h2>
<div class="rule" id="r-expr.arith-logic.syntax"><a class="rule-link" href="#r-expr.arith-logic.syntax" title="expr.arith-logic.syntax"><span>[expr<wbr>.arith-logic<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-ArithmeticOrLogicalExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-ArithmeticOrLogicalExpression">ArithmeticOrLogicalExpression</a></span> → <br />
      <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">+</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">-</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">*</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">/</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">%</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&amp;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">|</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">^</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&lt;&lt;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&gt;&gt;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 374px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-ArithmeticOrLogicalExpression"><svg class="railroad" viewBox="0 0 374 371" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-ArithmeticOrLogicalExpression">
<text class="comment" x="120" y="25">
ArithmeticOrLogicalExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 248 0 h 32"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="42"/>
<text x="109" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="42"/>
<text x="183" y="58">
+</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="42"/>
<text x="257" y="58">
Expression</text>
</g>
</a>
<path d=" M 159 53 h 10"/>
<path d=" M 197 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 280 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 33 m 280 0 v -33"/>
<path d=" M 47 107 v 33 m 280 0 v -33"/>
<path d=" M 47 140 v 33 m 280 0 v -33"/>
<path d=" M 47 173 v 33 m 280 0 v -33"/>
<path d=" M 47 206 v 33 m 280 0 v -33"/>
<path d=" M 47 239 v 33 m 280 0 v -33"/>
<path d=" M 47 272 v 33 m 280 0 v -33"/>
<path d=" M 47 305 v 33 m 280 0 v -33"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="75"/>
<text x="109" y="91">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="75"/>
<text x="183" y="91">
-</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="75"/>
<text x="257" y="91">
Expression</text>
</g>
</a>
<path d=" M 159 86 h 10"/>
<path d=" M 197 86 h 10"/>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="108"/>
<text x="109" y="124">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="108"/>
<text x="183" y="124">
*</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="108"/>
<text x="257" y="124">
Expression</text>
</g>
</a>
<path d=" M 159 119 h 10"/>
<path d=" M 197 119 h 10"/>
</g>
<path d=" M 47 140 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="141"/>
<text x="109" y="157">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="141"/>
<text x="183" y="157">
/</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="141"/>
<text x="257" y="157">
Expression</text>
</g>
</a>
<path d=" M 159 152 h 10"/>
<path d=" M 197 152 h 10"/>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="174"/>
<text x="109" y="190">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="174"/>
<text x="183" y="190">
%</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="174"/>
<text x="257" y="190">
Expression</text>
</g>
</a>
<path d=" M 159 185 h 10"/>
<path d=" M 197 185 h 10"/>
</g>
<path d=" M 47 206 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="207"/>
<text x="109" y="223">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="207"/>
<text x="183" y="223">
&amp;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="207"/>
<text x="257" y="223">
Expression</text>
</g>
</a>
<path d=" M 159 218 h 10"/>
<path d=" M 197 218 h 10"/>
</g>
<path d=" M 47 239 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="240"/>
<text x="109" y="256">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="240"/>
<text x="183" y="256">
|</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="240"/>
<text x="257" y="256">
Expression</text>
</g>
</a>
<path d=" M 159 251 h 10"/>
<path d=" M 197 251 h 10"/>
</g>
<path d=" M 47 272 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="273"/>
<text x="109" y="289">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="273"/>
<text x="183" y="289">
^</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="273"/>
<text x="257" y="289">
Expression</text>
</g>
</a>
<path d=" M 159 284 h 10"/>
<path d=" M 197 284 h 10"/>
</g>
<path d=" M 47 305 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="306"/>
<text x="109" y="322">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="306"/>
<text x="187" y="322">
&lt;&lt;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="306"/>
<text x="265" y="322">
Expression</text>
</g>
</a>
<path d=" M 159 317 h 10"/>
<path d=" M 205 317 h 10"/>
</g>
<path d=" M 47 338 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="339"/>
<text x="109" y="355">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="339"/>
<text x="187" y="355">
&gt;&gt;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="339"/>
<text x="265" y="355">
Expression</text>
</g>
</a>
<path d=" M 159 350 h 10"/>
<path d=" M 205 350 h 10"/>
</g>
</g>
<path d=" M 349 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 339 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.arith-logic.intro"><a class="rule-link" href="#r-expr.arith-logic.intro" title="expr.arith-logic.intro"><span>[expr<wbr>.arith-logic<wbr>.intro]</span/></a>
</div>
<p>Binary operators expressions are all written with infix notation.</p>
<div class="rule" id="r-expr.arith-logic.behavior"><a class="rule-link" href="#r-expr.arith-logic.behavior" title="expr.arith-logic.behavior"><span>[expr<wbr>.arith-logic<wbr>.behavior]</span/></a>
</div>
<p>This table summarizes the behavior of arithmetic and logical binary operators on primitive types and which traits are used to overload these operators for other types.
Remember that signed integers are always represented using two’s complement.
The operands of all of these operators are evaluated in <a href="../expressions.html#place-expressions-and-value-expressions">value expression context</a> so are moved or copied.</p>
<div class="table-wrapper"><table><thead><tr><th>Symbol</th><th>Integer</th><th><code>bool</code></th><th>Floating Point</th><th>Overloading Trait</th><th>Overloading Compound Assignment Trait</th></tr></thead><tbody>
<tr><td><code>+</code></td><td>Addition</td><td></td><td>Addition</td><td><code>std::ops::Add</code></td><td><code>std::ops::AddAssign</code></td></tr>
<tr><td><code>-</code></td><td>Subtraction</td><td></td><td>Subtraction</td><td><code>std::ops::Sub</code></td><td><code>std::ops::SubAssign</code></td></tr>
<tr><td><code>*</code></td><td>Multiplication</td><td></td><td>Multiplication</td><td><code>std::ops::Mul</code></td><td><code>std::ops::MulAssign</code></td></tr>
<tr><td><code>/</code></td><td>Division*†</td><td></td><td>Division</td><td><code>std::ops::Div</code></td><td><code>std::ops::DivAssign</code></td></tr>
<tr><td><code>%</code></td><td>Remainder**†</td><td></td><td>Remainder</td><td><code>std::ops::Rem</code></td><td><code>std::ops::RemAssign</code></td></tr>
<tr><td><code>&amp;</code></td><td>Bitwise AND</td><td><a href="../types/boolean.html#logical-and">Logical AND</a></td><td></td><td><code>std::ops::BitAnd</code></td><td><code>std::ops::BitAndAssign</code></td></tr>
<tr><td><code>|</code></td><td>Bitwise OR</td><td><a href="../types/boolean.html#logical-or">Logical OR</a></td><td></td><td><code>std::ops::BitOr</code></td><td><code>std::ops::BitOrAssign</code></td></tr>
<tr><td><code>^</code></td><td>Bitwise XOR</td><td><a href="../types/boolean.html#logical-xor">Logical XOR</a></td><td></td><td><code>std::ops::BitXor</code></td><td><code>std::ops::BitXorAssign</code></td></tr>
<tr><td><code>&lt;&lt;</code></td><td>Left Shift</td><td></td><td></td><td><code>std::ops::Shl</code></td><td><code>std::ops::ShlAssign</code></td></tr>
<tr><td><code>&gt;&gt;</code></td><td>Right Shift***</td><td></td><td></td><td><code>std::ops::Shr</code></td><td><code>std::ops::ShrAssign</code></td></tr>
</tbody></table>
</div>
<p>* Integer division rounds towards zero.</p>
<p>** Rust uses a remainder defined with <a href="https://en.wikipedia.org/wiki/Modulo_operation#Variants_of_the_definition">truncating division</a>. Given <code>remainder = dividend % divisor</code>, the remainder will have the same sign as the dividend.</p>
<p>*** Arithmetic right shift on signed integer types, logical right shift on
unsigned integer types.</p>
<p>† For integer types, division by zero panics.</p>
<p>Here are examples of these operators being used.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(3 + 6, 9);
assert_eq!(5.5 - 1.25, 4.25);
assert_eq!(-5 * 14, -70);
assert_eq!(14 / 3, 4);
assert_eq!(100 % 7, 2);
assert_eq!(0b1010 &amp; 0b1100, 0b1000);
assert_eq!(0b1010 | 0b1100, 0b1110);
assert_eq!(0b1010 ^ 0b1100, 0b110);
assert_eq!(13 &lt;&lt; 3, 104);
assert_eq!(-10 &gt;&gt; 2, -3);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.cmp"><a class="rule-link" href="#r-expr.cmp" title="expr.cmp"><span>[expr<wbr>.cmp]</span/></a>
</div>
<h2 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison Operators</a></h2>
<div class="rule" id="r-expr.cmp.syntax"><a class="rule-link" href="#r-expr.cmp.syntax" title="expr.cmp.syntax"><span>[expr<wbr>.cmp<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-ComparisonExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-ComparisonExpression">ComparisonExpression</a></span> → <br />
      <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">==</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">!=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&gt;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&lt;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&gt;=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&lt;=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 374px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-ComparisonExpression"><svg class="railroad" viewBox="0 0 374 239" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-ComparisonExpression">
<text class="comment" x="88" y="25">
ComparisonExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 256 0 h 24"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="42"/>
<text x="109" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="42"/>
<text x="187" y="58">
==</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="42"/>
<text x="265" y="58">
Expression</text>
</g>
</a>
<path d=" M 159 53 h 10"/>
<path d=" M 205 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 280 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 33 m 280 0 v -33"/>
<path d=" M 47 107 v 33 m 280 0 v -33"/>
<path d=" M 47 140 v 33 m 280 0 v -33"/>
<path d=" M 47 173 v 33 m 280 0 v -33"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="75"/>
<text x="109" y="91">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="75"/>
<text x="187" y="91">
!=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="75"/>
<text x="265" y="91">
Expression</text>
</g>
</a>
<path d=" M 159 86 h 10"/>
<path d=" M 205 86 h 10"/>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="108"/>
<text x="109" y="124">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="108"/>
<text x="183" y="124">
&gt;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="108"/>
<text x="257" y="124">
Expression</text>
</g>
</a>
<path d=" M 159 119 h 10"/>
<path d=" M 197 119 h 10"/>
</g>
<path d=" M 47 140 v 0 a 12 12 0 0 0 12 12 m 248 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="141"/>
<text x="109" y="157">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="169" y="141"/>
<text x="183" y="157">
&lt;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="207" y="141"/>
<text x="257" y="157">
Expression</text>
</g>
</a>
<path d=" M 159 152 h 10"/>
<path d=" M 197 152 h 10"/>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="174"/>
<text x="109" y="190">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="174"/>
<text x="187" y="190">
&gt;=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="174"/>
<text x="265" y="190">
Expression</text>
</g>
</a>
<path d=" M 159 185 h 10"/>
<path d=" M 205 185 h 10"/>
</g>
<path d=" M 47 206 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="207"/>
<text x="109" y="223">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="207"/>
<text x="187" y="223">
&lt;=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="207"/>
<text x="265" y="223">
Expression</text>
</g>
</a>
<path d=" M 159 218 h 10"/>
<path d=" M 205 218 h 10"/>
</g>
</g>
<path d=" M 349 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 339 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.cmp.intro"><a class="rule-link" href="#r-expr.cmp.intro" title="expr.cmp.intro"><span>[expr<wbr>.cmp<wbr>.intro]</span/></a>
</div>
<p>Comparison operators are also defined both for primitive types and many types in the standard library.</p>
<div class="rule" id="r-expr.cmp.paren-chaining"><a class="rule-link" href="#r-expr.cmp.paren-chaining" title="expr.cmp.paren-chaining"><span>[expr<wbr>.cmp<wbr>.paren-chaining]</span/></a>
</div>
<p>Parentheses are required when chaining comparison operators. For example, the expression <code>a == b == c</code> is invalid and may be written as <code>(a == b) == c</code>.</p>
<div class="rule" id="r-expr.cmp.trait"><a class="rule-link" href="#r-expr.cmp.trait" title="expr.cmp.trait"><span>[expr<wbr>.cmp<wbr>.trait]</span/></a>
</div>
<p>Unlike arithmetic and logical operators, the traits for overloading these operators are used more generally to show how a type may be compared and will likely be assumed to define actual comparisons by functions that use these traits as bounds.
Many functions and macros in the standard library can then use that assumption (although not to ensure safety).</p>
<div class="rule" id="r-expr.cmp.place"><a class="rule-link" href="#r-expr.cmp.place" title="expr.cmp.place"><span>[expr<wbr>.cmp<wbr>.place]</span/></a>
</div>
<p>Unlike the arithmetic and logical operators above, these operators implicitly take shared borrows of their operands, evaluating them in <a href="../expressions.html#place-expressions-and-value-expressions">place expression context</a>:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">let a = 1;
</span><span class="boring">let b = 1;
</span>a == b;
// is equivalent to
::std::cmp::PartialEq::eq(&amp;a, &amp;b);
<span class="boring">}</span></code></pre></pre>
<p>This means that the operands don’t have to be moved out of.</p>
<div class="rule" id="r-expr.cmp.behavior"><a class="rule-link" href="#r-expr.cmp.behavior" title="expr.cmp.behavior"><span>[expr<wbr>.cmp<wbr>.behavior]</span/></a>
</div>
<div class="table-wrapper"><table><thead><tr><th>Symbol</th><th>Meaning</th><th>Overloading method</th></tr></thead><tbody>
<tr><td><code>==</code></td><td>Equal</td><td><code>std::cmp::PartialEq::eq</code></td></tr>
<tr><td><code>!=</code></td><td>Not equal</td><td><code>std::cmp::PartialEq::ne</code></td></tr>
<tr><td><code>&gt;</code></td><td>Greater than</td><td><code>std::cmp::PartialOrd::gt</code></td></tr>
<tr><td><code>&lt;</code></td><td>Less than</td><td><code>std::cmp::PartialOrd::lt</code></td></tr>
<tr><td><code>&gt;=</code></td><td>Greater than or equal to</td><td><code>std::cmp::PartialOrd::ge</code></td></tr>
<tr><td><code>&lt;=</code></td><td>Less than or equal to</td><td><code>std::cmp::PartialOrd::le</code></td></tr>
</tbody></table>
</div>
<p>Here are examples of the comparison operators being used.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert!(123 == 123);
assert!(23 != -12);
assert!(12.5 &gt; 12.2);
assert!([1, 2, 3] &lt; [1, 3, 4]);
assert!('A' &lt;= 'B');
assert!("World" &gt;= "Hello");
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.bool-logic"><a class="rule-link" href="#r-expr.bool-logic" title="expr.bool-logic"><span>[expr<wbr>.bool-logic]</span/></a>
</div>
<h2 id="lazy-boolean-operators"><a class="header" href="#lazy-boolean-operators">Lazy boolean operators</a></h2>
<div class="rule" id="r-expr.bool-logic.syntax"><a class="rule-link" href="#r-expr.bool-logic.syntax" title="expr.bool-logic.syntax"><span>[expr<wbr>.bool-logic<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-LazyBooleanExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-LazyBooleanExpression">LazyBooleanExpression</a></span> → <br />
      <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">||</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&amp;&amp;</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 374px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-LazyBooleanExpression"><svg class="railroad" viewBox="0 0 374 107" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-LazyBooleanExpression">
<text class="comment" x="92" y="25">
LazyBooleanExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 256 0 h 24"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="42"/>
<text x="109" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="42"/>
<text x="187" y="58">
||</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="42"/>
<text x="265" y="58">
Expression</text>
</g>
</a>
<path d=" M 159 53 h 10"/>
<path d=" M 205 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 280 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 256 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="75"/>
<text x="109" y="91">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="75"/>
<text x="187" y="91">
&amp;&amp;</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="75"/>
<text x="265" y="91">
Expression</text>
</g>
</a>
<path d=" M 159 86 h 10"/>
<path d=" M 205 86 h 10"/>
</g>
</g>
<path d=" M 349 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 339 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.bool-logic.intro"><a class="rule-link" href="#r-expr.bool-logic.intro" title="expr.bool-logic.intro"><span>[expr<wbr>.bool-logic<wbr>.intro]</span/></a>
</div>
<p>The operators <code>||</code> and <code>&amp;&amp;</code> may be applied to operands of boolean type.
The <code>||</code> operator denotes logical ‘or’, and the <code>&amp;&amp;</code> operator denotes logical ‘and’.</p>
<div class="rule" id="r-expr.bool-logic.conditional-evaluation"><a class="rule-link" href="#r-expr.bool-logic.conditional-evaluation" title="expr.bool-logic.conditional-evaluation"><span>[expr<wbr>.bool-logic<wbr>.conditional-evaluation]</span/></a>
</div>
<p>They differ from <code>|</code> and <code>&amp;</code> in that the right-hand operand is only evaluated when the left-hand operand does not already determine the result of the expression.
That is, <code>||</code> only evaluates its right-hand operand when the left-hand operand evaluates to <code>false</code>, and <code>&amp;&amp;</code> only when it evaluates to <code>true</code>.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = false || true; // true
let y = false &amp;&amp; panic!(); // false, doesn't evaluate `panic!()`
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as"><a class="rule-link" href="#r-expr.as" title="expr.as"><span>[expr<wbr>.as]</span/></a>
</div>
<h2 id="type-cast-expressions"><a class="header" href="#type-cast-expressions">Type cast expressions</a></h2>
<div class="rule" id="r-expr.as.syntax"><a class="rule-link" href="#r-expr.as.syntax" title="expr.as.syntax"><span>[expr<wbr>.as<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-TypeCastExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-TypeCastExpression">TypeCastExpression</a></span> → <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">as</span> <span class="grammar-text"><a href="../types.html#grammar-TypeNoBounds">TypeNoBounds</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 342px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-TypeCastExpression"><svg class="railroad" viewBox="0 0 342 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-TypeCastExpression">
<text class="comment" x="78" y="25">
TypeCastExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="35" y="42"/>
<text x="85" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="145" y="42"/>
<text x="163" y="58">
as</text>
</g>
<a class="link" xlink:href="../types.html#railroad-TypeNoBounds">
<g class="nonterminal">
<rect height="22" width="116" x="191" y="42"/>
<text x="249" y="58">
TypeNoBounds</text>
</g>
</a>
<path d=" M 135 53 h 10"/>
<path d=" M 181 53 h 10"/>
</g>
<path d=" M 317 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 307 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.as.intro"><a class="rule-link" href="#r-expr.as.intro" title="expr.as.intro"><span>[expr<wbr>.as<wbr>.intro]</span/></a>
</div>
<p>A type cast expression is denoted with the binary operator <code>as</code>.</p>
<div class="rule" id="r-expr.as.result"><a class="rule-link" href="#r-expr.as.result" title="expr.as.result"><span>[expr<wbr>.as<wbr>.result]</span/></a>
</div>
<p>Executing an <code>as</code> expression casts the value on the left-hand side to the type on the right-hand side.</p>
<p>An example of an <code>as</code> expression:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">fn sum(values: &amp;[f64]) -&gt; f64 { 0.0 }
</span><span class="boring">fn len(values: &amp;[f64]) -&gt; i32 { 0 }
</span>fn average(values: &amp;[f64]) -&gt; f64 {
    let sum: f64 = sum(values);
    let size: f64 = len(values) as f64;
    sum / size
}
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as.coercions"><a class="rule-link" href="#r-expr.as.coercions" title="expr.as.coercions"><span>[expr<wbr>.as<wbr>.coercions]</span/></a>
</div>
<p><code>as</code> can be used to explicitly perform <a href="../type-coercions.html">coercions</a>, as well as the following additional casts.
Any cast that does not fit either a coercion rule or an entry in the table is a compiler error.
Here <code>*T</code> means either <code>*const T</code> or <code>*mut T</code>. <code>m</code> stands for optional <code>mut</code> in
reference types and <code>mut</code> or <code>const</code> in pointer types.</p>
<div class="table-wrapper"><table><thead><tr><th>Type of <code>e</code></th><th><code>U</code></th><th>Cast performed by <code>e as U</code></th></tr></thead><tbody>
<tr><td>Integer or Float type</td><td>Integer or Float type</td><td><a href="operator-expr.html#r-expr.as.numeric">Numeric cast</a></td></tr>
<tr><td>Enumeration</td><td>Integer type</td><td><a href="operator-expr.html#r-expr.as.enum">Enum cast</a></td></tr>
<tr><td><code>bool</code> or <code>char</code></td><td>Integer type</td><td><a href="operator-expr.html#r-expr.as.bool-char-as-int">Primitive to integer cast</a></td></tr>
<tr><td><code>u8</code></td><td><code>char</code></td><td><a href="operator-expr.html#r-expr.as.u8-as-char"><code>u8</code> to <code>char</code> cast</a></td></tr>
<tr><td><code>*T</code></td><td><code>*V</code> <sup class="footnote-reference" id="fr-meta-compat-1"><a href="#footnote-meta-compat">1</a></sup></td><td><a href="operator-expr.html#r-expr.as.pointer">Pointer to pointer cast</a></td></tr>
<tr><td><code>*T</code> where <code>T: Sized</code></td><td>Integer type</td><td><a href="operator-expr.html#r-expr.as.pointer-as-int">Pointer to address cast</a></td></tr>
<tr><td>Integer type</td><td><code>*V</code> where <code>V: Sized</code></td><td><a href="operator-expr.html#r-expr.as.int-as-pointer">Address to pointer cast</a></td></tr>
<tr><td><code>&amp;m₁ [T; n]</code></td><td><code>*m₂ T</code> <sup class="footnote-reference" id="fr-lessmut-1"><a href="#footnote-lessmut">2</a></sup></td><td>Array to pointer cast</td></tr>
<tr><td><code>*m₁ [T; n]</code></td><td><code>*m₂ T</code> <sup class="footnote-reference" id="fr-lessmut-2"><a href="#footnote-lessmut">2</a></sup></td><td>Array to pointer cast</td></tr>
<tr><td><a href="../types/function-item.html">Function item</a></td><td><a href="../types/function-pointer.html">Function pointer</a></td><td>Function item to function pointer cast</td></tr>
<tr><td><a href="../types/function-item.html">Function item</a></td><td><code>*V</code> where <code>V: Sized</code></td><td>Function item to pointer cast</td></tr>
<tr><td><a href="../types/function-item.html">Function item</a></td><td>Integer</td><td>Function item to address cast</td></tr>
<tr><td><a href="../types/function-pointer.html">Function pointer</a></td><td><code>*V</code> where <code>V: Sized</code></td><td>Function pointer to pointer cast</td></tr>
<tr><td><a href="../types/function-pointer.html">Function pointer</a></td><td>Integer</td><td>Function pointer to address cast</td></tr>
<tr><td>Closure <sup class="footnote-reference" id="fr-no-capture-1"><a href="#footnote-no-capture">3</a></sup></td><td>Function pointer</td><td>Closure to function pointer cast</td></tr>
</tbody></table>
</div>
<h3 id="semantics"><a class="header" href="#semantics">Semantics</a></h3>
<div class="rule" id="r-expr.as.numeric"><a class="rule-link" href="#r-expr.as.numeric" title="expr.as.numeric"><span>[expr<wbr>.as<wbr>.numeric]</span/></a>
</div>
<h4 id="numeric-cast"><a class="header" href="#numeric-cast">Numeric cast</a></h4>
<div class="rule" id="r-expr.as.numeric.int-same-size"><a class="rule-link" href="#r-expr.as.numeric.int-same-size" title="expr.as.numeric.int-same-size"><span>[expr<wbr>.as<wbr>.numeric<wbr>.int-same-size]</span/></a>
</div>
<ul>
<li>
<p>Casting between two integers of the same size (e.g. i32 -&gt; u32) is a no-op
(Rust uses 2’s complement for negative values of fixed integers)</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(42i8 as u8, 42u8);
assert_eq!(-1i8 as u8, 255u8);
assert_eq!(255u8 as i8, -1i8);
assert_eq!(-1i16 as u16, 65535u16);
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.int-truncation"><a class="rule-link" href="#r-expr.as.numeric.int-truncation" title="expr.as.numeric.int-truncation"><span>[expr<wbr>.as<wbr>.numeric<wbr>.int-truncation]</span/></a>
</div>
<ul>
<li>
<p>Casting from a larger integer to a smaller integer (e.g. u32 -&gt; u8) will
truncate</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(42u16 as u8, 42u8);
assert_eq!(1234u16 as u8, 210u8);
assert_eq!(0xabcdu16 as u8, 0xcdu8);

assert_eq!(-42i16 as i8, -42i8);
assert_eq!(1234u16 as i8, -46i8);
assert_eq!(0xabcdi32 as i8, -51i8);
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.int-extension"><a class="rule-link" href="#r-expr.as.numeric.int-extension" title="expr.as.numeric.int-extension"><span>[expr<wbr>.as<wbr>.numeric<wbr>.int-extension]</span/></a>
</div>
<ul>
<li>
<p>Casting from a smaller integer to a larger integer (e.g. u8 -&gt; u32) will</p>
<ul>
<li>zero-extend if the source is unsigned</li>
<li>sign-extend if the source is signed</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(42i8 as i16, 42i16);
assert_eq!(-17i8 as i16, -17i16);
assert_eq!(0b1000_1010u8 as u16, 0b0000_0000_1000_1010u16, "Zero-extend");
assert_eq!(0b0000_1010i8 as i16, 0b0000_0000_0000_1010i16, "Sign-extend 0");
assert_eq!(0b1000_1010u8 as i8 as i16, 0b1111_1111_1000_1010u16 as i16, "Sign-extend 1");
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.float-as-int"><a class="rule-link" href="#r-expr.as.numeric.float-as-int" title="expr.as.numeric.float-as-int"><span>[expr<wbr>.as<wbr>.numeric<wbr>.float-as-int]</span/></a>
</div>
<ul>
<li>
<p>Casting from a float to an integer will round the float towards zero</p>
<ul>
<li><code>NaN</code> will return <code>0</code></li>
<li>Values larger than the maximum integer value, including <code>INFINITY</code>, will saturate to the maximum value of the integer type.</li>
<li>Values smaller than the minimum integer value, including <code>NEG_INFINITY</code>, will saturate to the minimum value of the integer type.</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(42.9f32 as i32, 42);
assert_eq!(-42.9f32 as i32, -42);
assert_eq!(42_000_000f32 as i32, 42_000_000);
assert_eq!(std::f32::NAN as i32, 0);
assert_eq!(1_000_000_000_000_000f32 as i32, 0x7fffffffi32);
assert_eq!(std::f32::NEG_INFINITY as i32, -0x80000000i32);
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.int-as-float"><a class="rule-link" href="#r-expr.as.numeric.int-as-float" title="expr.as.numeric.int-as-float"><span>[expr<wbr>.as<wbr>.numeric<wbr>.int-as-float]</span/></a>
</div>
<ul>
<li>
<p>Casting from an integer to float will produce the closest possible float *</p>
<ul>
<li>if necessary, rounding is according to <code>roundTiesToEven</code> mode ***</li>
<li>on overflow, infinity (of the same sign as the input) is produced</li>
<li>note: with the current set of numeric types, overflow can only happen
on <code>u128 as f32</code> for values greater or equal to <code>f32::MAX + (0.5 ULP)</code></li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(1337i32 as f32, 1337f32);
assert_eq!(123_456_789i32 as f32, 123_456_790f32, "Rounded");
assert_eq!(0xffffffff_ffffffff_ffffffff_ffffffff_u128 as f32, std::f32::INFINITY);
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.float-widening"><a class="rule-link" href="#r-expr.as.numeric.float-widening" title="expr.as.numeric.float-widening"><span>[expr<wbr>.as<wbr>.numeric<wbr>.float-widening]</span/></a>
</div>
<ul>
<li>
<p>Casting from an f32 to an f64 is perfect and lossless</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(1_234.5f32 as f64, 1_234.5f64);
assert_eq!(std::f32::INFINITY as f64, std::f64::INFINITY);
assert!((std::f32::NAN as f64).is_nan());
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<div class="rule" id="r-expr.as.numeric.float-narrowing"><a class="rule-link" href="#r-expr.as.numeric.float-narrowing" title="expr.as.numeric.float-narrowing"><span>[expr<wbr>.as<wbr>.numeric<wbr>.float-narrowing]</span/></a>
</div>
<ul>
<li>
<p>Casting from an f64 to an f32 will produce the closest possible f32 **</p>
<ul>
<li>if necessary, rounding is according to <code>roundTiesToEven</code> mode ***</li>
<li>on overflow, infinity (of the same sign as the input) is produced</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(1_234.5f64 as f32, 1_234.5f32);
assert_eq!(1_234_567_891.123f64 as f32, 1_234_567_890f32, "Rounded");
assert_eq!(std::f64::INFINITY as f32, std::f32::INFINITY);
assert!((std::f64::NAN as f32).is_nan());
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<p>* if integer-to-float casts with this rounding mode and overflow behavior are
not supported natively by the hardware, these casts will likely be slower than
expected.</p>
<p>** if f64-to-f32 casts with this rounding mode and overflow behavior are not
supported natively by the hardware, these casts will likely be slower than
expected.</p>
<p>*** as defined in IEEE 754-2008 §4.3.1: pick the nearest floating point
number, preferring the one with an even least significant digit if exactly
halfway between two floating point numbers.</p>
<div class="rule" id="r-expr.as.enum"><a class="rule-link" href="#r-expr.as.enum" title="expr.as.enum"><span>[expr<wbr>.as<wbr>.enum]</span/></a>
</div>
<h4 id="enum-cast"><a class="header" href="#enum-cast">Enum cast</a></h4>
<div class="rule" id="r-expr.as.enum.discriminant"><a class="rule-link" href="#r-expr.as.enum.discriminant" title="expr.as.enum.discriminant"><span>[expr<wbr>.as<wbr>.enum<wbr>.discriminant]</span/></a>
</div>
<p>Casts an enum to its discriminant, then uses a numeric cast if needed.
Casting is limited to the following kinds of enumerations:</p>
<ul>
<li><a href="../items/enumerations.html#unit-only-enum">Unit-only enums</a></li>
<li><a href="../items/enumerations.html#field-less-enum">Field-less enums</a> without <a href="../items/enumerations.html#explicit-discriminants">explicit discriminants</a>, or where only unit-variants have explicit discriminants</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Enum { A, B, C }
assert_eq!(Enum::A as i32, 0);
assert_eq!(Enum::B as i32, 1);
assert_eq!(Enum::C as i32, 2);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as.enum.no-drop"><a class="rule-link" href="#r-expr.as.enum.no-drop" title="expr.as.enum.no-drop"><span>[expr<wbr>.as<wbr>.enum<wbr>.no-drop]</span/></a>
</div>
<p>Casting is not allowed if the enum implements <a href="../../core/ops/drop/trait.Drop.html"><code>Drop</code></a>.</p>
<div class="rule" id="r-expr.as.bool-char-as-int"><a class="rule-link" href="#r-expr.as.bool-char-as-int" title="expr.as.bool-char-as-int"><span>[expr<wbr>.as<wbr>.bool-char-as-int]</span/></a>
</div>
<h4 id="primitive-to-integer-cast"><a class="header" href="#primitive-to-integer-cast">Primitive to integer cast</a></h4>
<ul>
<li><code>false</code> casts to <code>0</code>, <code>true</code> casts to <code>1</code></li>
<li><code>char</code> casts to the value of the code point, then uses a numeric cast if needed.</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(false as i32, 0);
assert_eq!(true as i32, 1);
assert_eq!('A' as i32, 65);
assert_eq!('Ö' as i32, 214);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as.u8-as-char"><a class="rule-link" href="#r-expr.as.u8-as-char" title="expr.as.u8-as-char"><span>[expr<wbr>.as<wbr>.u8-as-char]</span/></a>
</div>
<h4 id="u8-to-char-cast"><a class="header" href="#u8-to-char-cast"><code>u8</code> to <code>char</code> cast</a></h4>
<p>Casts to the <code>char</code> with the corresponding code point.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>assert_eq!(65u8 as char, 'A');
assert_eq!(214u8 as char, 'Ö');
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as.pointer-as-int"><a class="rule-link" href="#r-expr.as.pointer-as-int" title="expr.as.pointer-as-int"><span>[expr<wbr>.as<wbr>.pointer-as-int]</span/></a>
</div>
<h4 id="pointer-to-address-cast"><a class="header" href="#pointer-to-address-cast">Pointer to address cast</a></h4>
<p>Casting from a raw pointer to an integer produces the machine address of the referenced memory.
If the integer type is smaller than the pointer type, the address may be truncated; using <code>usize</code> avoids this.</p>
<div class="rule" id="r-expr.as.int-as-pointer"><a class="rule-link" href="#r-expr.as.int-as-pointer" title="expr.as.int-as-pointer"><span>[expr<wbr>.as<wbr>.int-as-pointer]</span/></a>
</div>
<h4 id="address-to-pointer-cast"><a class="header" href="#address-to-pointer-cast">Address to pointer cast</a></h4>
<p>Casting from an integer to a raw pointer interprets the integer as a memory address and produces a pointer referencing that memory.</p>
<div class="alert alert-warning">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p>
<p>This interacts with the Rust memory model, which is still under development.
A pointer obtained from this cast may suffer additional restrictions even if it is bitwise equal to a valid pointer.
Dereferencing such a pointer may be <a href="../behavior-considered-undefined.html">undefined behavior</a> if aliasing rules are not followed.</p>
</blockquote>
</div>
<p>A trivial example of sound address arithmetic:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut values: [i32; 2] = [1, 2];
let p1: *mut i32 = values.as_mut_ptr();
let first_address = p1 as usize;
let second_address = first_address + 4; // 4 == size_of::&lt;i32&gt;()
let p2 = second_address as *mut i32;
unsafe {
    *p2 += 1;
}
assert_eq!(values[1], 3);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.as.pointer"><a class="rule-link" href="#r-expr.as.pointer" title="expr.as.pointer"><span>[expr<wbr>.as<wbr>.pointer]</span/></a>
</div>
<h4 id="pointer-to-pointer-cast"><a class="header" href="#pointer-to-pointer-cast">Pointer-to-pointer cast</a></h4>
<div class="rule" id="r-expr.as.pointer.behavior"><a class="rule-link" href="#r-expr.as.pointer.behavior" title="expr.as.pointer.behavior"><span>[expr<wbr>.as<wbr>.pointer<wbr>.behavior]</span/></a>
</div>
<p><code>*const T</code> / <code>*mut T</code> can be cast to <code>*const U</code> / <code>*mut U</code> with the following behavior:</p>
<div class="rule" id="r-expr.as.pointer.sized"><a class="rule-link" href="#r-expr.as.pointer.sized" title="expr.as.pointer.sized"><span>[expr<wbr>.as<wbr>.pointer<wbr>.sized]</span/></a>
</div>
<ul>
<li>If <code>T</code> and <code>U</code> are both sized, the pointer is returned unchanged.</li>
</ul>
<div class="rule" id="r-expr.as.pointer.unsized"><a class="rule-link" href="#r-expr.as.pointer.unsized" title="expr.as.pointer.unsized"><span>[expr<wbr>.as<wbr>.pointer<wbr>.unsized]</span/></a>
</div>
<ul>
<li>
<p>If <code>T</code> and <code>U</code> are both unsized, the pointer is also returned unchanged.
In particular, the metadata is preserved exactly.</p>
<p>For instance, a cast from <code>*const [T]</code> to <code>*const [U]</code> preserves the number of elements.
Note that, as a consequence, such casts do not necessarily preserve the size of the pointer’s referent
(e.g., casting <code>*const [u16]</code> to <code>*const [u8]</code> will result in a raw pointer which refers to an object of half the size of the original).
The same holds for <code>str</code> and any compound type whose unsized tail is a slice type,
such as <code>struct Foo(i32, [u8])</code> or <code>(u64, Foo)</code>.</p>
</li>
</ul>
<div class="rule" id="r-expr.as.pointer.discard-metadata"><a class="rule-link" href="#r-expr.as.pointer.discard-metadata" title="expr.as.pointer.discard-metadata"><span>[expr<wbr>.as<wbr>.pointer<wbr>.discard-metadata]</span/></a>
</div>
<ul>
<li>If <code>T</code> is unsized and <code>U</code> is sized, the cast discards all metadata that completes the wide pointer <code>T</code> and produces a thin pointer <code>U</code> consisting of the data part of the unsized pointer.</li>
</ul>
<div class="rule" id="r-expr.assign"><a class="rule-link" href="#r-expr.assign" title="expr.assign"><span>[expr<wbr>.assign]</span/></a>
</div>
<h2 id="assignment-expressions"><a class="header" href="#assignment-expressions">Assignment expressions</a></h2>
<div class="rule" id="r-expr.assign.syntax"><a class="rule-link" href="#r-expr.assign.syntax" title="expr.assign.syntax"><span>[expr<wbr>.assign<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-AssignmentExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-AssignmentExpression">AssignmentExpression</a></span> → <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 318px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-AssignmentExpression"><svg class="railroad" viewBox="0 0 318 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-AssignmentExpression">
<text class="comment" x="88" y="25">
AssignmentExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="35" y="42"/>
<text x="85" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="145" y="42"/>
<text x="159" y="58">
=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="183" y="42"/>
<text x="233" y="58">
Expression</text>
</g>
</a>
<path d=" M 135 53 h 10"/>
<path d=" M 173 53 h 10"/>
</g>
<path d=" M 293 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 283 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.assign.intro"><a class="rule-link" href="#r-expr.assign.intro" title="expr.assign.intro"><span>[expr<wbr>.assign<wbr>.intro]</span/></a>
</div>
<p>An <em>assignment expression</em> moves a value into a specified place.</p>
<div class="rule" id="r-expr.assign.assignee"><a class="rule-link" href="#r-expr.assign.assignee" title="expr.assign.assignee"><span>[expr<wbr>.assign<wbr>.assignee]</span/></a>
</div>
<p>An assignment expression consists of a <a href="../expressions.html#mutability">mutable</a> <a href="../expressions.html#place-expressions-and-value-expressions">assignee expression</a>, the <em>assignee operand</em>, followed by an equals sign (<code>=</code>) and a <a href="../expressions.html#place-expressions-and-value-expressions">value expression</a>, the <em>assigned value operand</em>.</p>
<div class="rule" id="r-expr.assign.behavior-basic"><a class="rule-link" href="#r-expr.assign.behavior-basic" title="expr.assign.behavior-basic"><span>[expr<wbr>.assign<wbr>.behavior-basic]</span/></a>
</div>
<p>In its most basic form, an assignee expression is a <a href="../expressions.html#place-expressions-and-value-expressions">place expression</a>, and we discuss this case first.</p>
<div class="rule" id="r-expr.assign.behavior-destructuring"><a class="rule-link" href="#r-expr.assign.behavior-destructuring" title="expr.assign.behavior-destructuring"><span>[expr<wbr>.assign<wbr>.behavior-destructuring]</span/></a>
</div>
<p>The more general case of destructuring assignment is discussed below, but this case always decomposes into sequential assignments to place expressions, which may be considered the more fundamental case.</p>
<div class="rule" id="r-expr.assign.basic"><a class="rule-link" href="#r-expr.assign.basic" title="expr.assign.basic"><span>[expr<wbr>.assign<wbr>.basic]</span/></a>
</div>
<h3 id="basic-assignments"><a class="header" href="#basic-assignments">Basic assignments</a></h3>
<div class="rule" id="r-expr.assign.evaluation-order"><a class="rule-link" href="#r-expr.assign.evaluation-order" title="expr.assign.evaluation-order"><span>[expr<wbr>.assign<wbr>.evaluation-order]</span/></a>
</div>
<p>Evaluating assignment expressions begins by evaluating its operands.
The assigned value operand is evaluated first, followed by the assignee expression.</p>
<div class="rule" id="r-expr.assign.destructuring-order"><a class="rule-link" href="#r-expr.assign.destructuring-order" title="expr.assign.destructuring-order"><span>[expr<wbr>.assign<wbr>.destructuring-order]</span/></a>
</div>
<p>For destructuring assignment, subexpressions of the assignee expression are evaluated left-to-right.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>This is different than other expressions in that the right operand is evaluated before the left one.</p>
</blockquote>
</div>
<div class="rule" id="r-expr.assign.drop-target"><a class="rule-link" href="#r-expr.assign.drop-target" title="expr.assign.drop-target"><span>[expr<wbr>.assign<wbr>.drop-target]</span/></a>
</div>
<p>It then has the effect of first <a href="../destructors.html">dropping</a> the value at the assigned place, unless the place is an uninitialized local variable or an uninitialized field of a local variable.</p>
<div class="rule" id="r-expr.assign.behavior"><a class="rule-link" href="#r-expr.assign.behavior" title="expr.assign.behavior"><span>[expr<wbr>.assign<wbr>.behavior]</span/></a>
</div>
<p>Next it either <a href="../expressions.html#moved-and-copied-types">copies or moves</a> the assigned value to the assigned place.</p>
<div class="rule" id="r-expr.assign.result"><a class="rule-link" href="#r-expr.assign.result" title="expr.assign.result"><span>[expr<wbr>.assign<wbr>.result]</span/></a>
</div>
<p>An assignment expression always produces <a href="../types/tuple.html">the unit value</a>.</p>
<p>Example:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x = 0;
let y = 0;
x = y;
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.assign.destructure"><a class="rule-link" href="#r-expr.assign.destructure" title="expr.assign.destructure"><span>[expr<wbr>.assign<wbr>.destructure]</span/></a>
</div>
<h3 id="destructuring-assignments"><a class="header" href="#destructuring-assignments">Destructuring assignments</a></h3>
<div class="rule" id="r-expr.assign.destructure.intro"><a class="rule-link" href="#r-expr.assign.destructure.intro" title="expr.assign.destructure.intro"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.intro]</span/></a>
</div>
<p>Destructuring assignment is a counterpart to destructuring pattern matches for variable declaration, permitting assignment to complex values, such as tuples or structs.
For instance, we may swap two mutable variables:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let (mut a, mut b) = (0, 1);
// Swap `a` and `b` using destructuring assignment.
(b, a) = (a, b);
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.assign.destructure.assignee"><a class="rule-link" href="#r-expr.assign.destructure.assignee" title="expr.assign.destructure.assignee"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.assignee]</span/></a>
</div>
<p>In contrast to destructuring declarations using <code>let</code>, patterns may not appear on the left-hand side of an assignment due to syntactic ambiguities.
Instead, a group of expressions that correspond to patterns are designated to be <a href="../expressions.html#place-expressions-and-value-expressions">assignee expressions</a>, and permitted on the left-hand side of an assignment.
Assignee expressions are then desugared to pattern matches followed by sequential assignment.</p>
<div class="rule" id="r-expr.assign.destructure.irrefutable"><a class="rule-link" href="#r-expr.assign.destructure.irrefutable" title="expr.assign.destructure.irrefutable"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.irrefutable]</span/></a>
</div>
<p>The desugared patterns must be irrefutable: in particular, this means that only slice patterns whose length is known at compile-time, and the trivial slice <code>[..]</code>, are permitted for destructuring assignment.</p>
<p>The desugaring method is straightforward, and is illustrated best by example.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">struct Struct { x: u32, y: u32 }
</span><span class="boring">let (mut a, mut b) = (0, 0);
</span>(a, b) = (3, 4);

[a, b] = [3, 4];

Struct { x: a, y: b } = Struct { x: 3, y: 4};

// desugars to:

{
    let (_a, _b) = (3, 4);
    a = _a;
    b = _b;
}

{
    let [_a, _b] = [3, 4];
    a = _a;
    b = _b;
}

{
    let Struct { x: _a, y: _b } = Struct { x: 3, y: 4};
    a = _a;
    b = _b;
}
<span class="boring">}</span></code></pre></pre>
<div class="rule" id="r-expr.assign.destructure.repeat-ident"><a class="rule-link" href="#r-expr.assign.destructure.repeat-ident" title="expr.assign.destructure.repeat-ident"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.repeat-ident]</span/></a>
</div>
<p>Identifiers are not forbidden from being used multiple times in a single assignee expression.</p>
<div class="rule" id="r-expr.assign.destructure.discard-value"><a class="rule-link" href="#r-expr.assign.destructure.discard-value" title="expr.assign.destructure.discard-value"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.discard-value]</span/></a>
</div>
<p><a href="./underscore-expr.html">Underscore expressions</a> and empty <a href="./range-expr.html">range expressions</a> may be used to ignore certain values, without binding them.</p>
<div class="rule" id="r-expr.assign.destructure.default-binding"><a class="rule-link" href="#r-expr.assign.destructure.default-binding" title="expr.assign.destructure.default-binding"><span>[expr<wbr>.assign<wbr>.destructure<wbr>.default-binding]</span/></a>
</div>
<p>Note that default binding modes do not apply for the desugared expression.</p>
<div class="rule" id="r-expr.compound-assign"><a class="rule-link" href="#r-expr.compound-assign" title="expr.compound-assign"><span>[expr<wbr>.compound-assign]</span/></a>
</div>
<h2 id="compound-assignment-expressions"><a class="header" href="#compound-assignment-expressions">Compound assignment expressions</a></h2>
<div class="rule" id="r-expr.compound-assign.syntax"><a class="rule-link" href="#r-expr.compound-assign.syntax" title="expr.compound-assign.syntax"><span>[expr<wbr>.compound-assign<wbr>.syntax]</span/></a>
</div>
<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-CompoundAssignmentExpression" onclick="show_railroad()"><a href="operator-expr.html#railroad-CompoundAssignmentExpression">CompoundAssignmentExpression</a></span> → <br />
      <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">+=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">-=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">*=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">/=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">%=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&amp;=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">|=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">^=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&lt;&lt;=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <br />
    | <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span> <span class="grammar-literal">&gt;&gt;=</span> <span class="grammar-text"><a href="../expressions.html#grammar-Expression">Expression</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>
<div class="grammar-railroad grammar-hidden">
<div style="width: 382px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-CompoundAssignmentExpression"><svg class="railroad" viewBox="0 0 382 371" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<a class="link" xlink:href="operator-expr.html#grammar-CompoundAssignmentExpression">
<text class="comment" x="116" y="25">
CompoundAssignmentExpression</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5"/>
<g class="choice">
<path d=" M 35 53 h 24 m 256 0 h 32"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="42"/>
<text x="109" y="58">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="42"/>
<text x="187" y="58">
+=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="42"/>
<text x="265" y="58">
Expression</text>
</g>
</a>
<path d=" M 159 53 h 10"/>
<path d=" M 205 53 h 10"/>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 288 0 v -9 a 12 12 0 0 1 12 -12"/>
<path d=" M 47 74 v 33 m 288 0 v -33"/>
<path d=" M 47 107 v 33 m 288 0 v -33"/>
<path d=" M 47 140 v 33 m 288 0 v -33"/>
<path d=" M 47 173 v 33 m 288 0 v -33"/>
<path d=" M 47 206 v 33 m 288 0 v -33"/>
<path d=" M 47 239 v 33 m 288 0 v -33"/>
<path d=" M 47 272 v 33 m 288 0 v -33"/>
<path d=" M 47 305 v 33 m 288 0 v -33"/>
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="75"/>
<text x="109" y="91">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="75"/>
<text x="187" y="91">
-=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="75"/>
<text x="265" y="91">
Expression</text>
</g>
</a>
<path d=" M 159 86 h 10"/>
<path d=" M 205 86 h 10"/>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="108"/>
<text x="109" y="124">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="108"/>
<text x="187" y="124">
*=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="108"/>
<text x="265" y="124">
Expression</text>
</g>
</a>
<path d=" M 159 119 h 10"/>
<path d=" M 205 119 h 10"/>
</g>
<path d=" M 47 140 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="141"/>
<text x="109" y="157">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="141"/>
<text x="187" y="157">
/=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="141"/>
<text x="265" y="157">
Expression</text>
</g>
</a>
<path d=" M 159 152 h 10"/>
<path d=" M 205 152 h 10"/>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="174"/>
<text x="109" y="190">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="174"/>
<text x="187" y="190">
%=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="174"/>
<text x="265" y="190">
Expression</text>
</g>
</a>
<path d=" M 159 185 h 10"/>
<path d=" M 205 185 h 10"/>
</g>
<path d=" M 47 206 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="207"/>
<text x="109" y="223">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="207"/>
<text x="187" y="223">
&amp;=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="207"/>
<text x="265" y="223">
Expression</text>
</g>
</a>
<path d=" M 159 218 h 10"/>
<path d=" M 205 218 h 10"/>
</g>
<path d=" M 47 239 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="240"/>
<text x="109" y="256">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="240"/>
<text x="187" y="256">
|=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="240"/>
<text x="265" y="256">
Expression</text>
</g>
</a>
<path d=" M 159 251 h 10"/>
<path d=" M 205 251 h 10"/>
</g>
<path d=" M 47 272 v 0 a 12 12 0 0 0 12 12 m 256 0 h 8 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="273"/>
<text x="109" y="289">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="169" y="273"/>
<text x="187" y="289">
^=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="215" y="273"/>
<text x="265" y="289">
Expression</text>
</g>
</a>
<path d=" M 159 284 h 10"/>
<path d=" M 205 284 h 10"/>
</g>
<path d=" M 47 305 v 0 a 12 12 0 0 0 12 12 m 264 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="306"/>
<text x="109" y="322">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="169" y="306"/>
<text x="191" y="322">
&lt;&lt;=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="223" y="306"/>
<text x="273" y="322">
Expression</text>
</g>
</a>
<path d=" M 159 317 h 10"/>
<path d=" M 213 317 h 10"/>
</g>
<path d=" M 47 338 v 0 a 12 12 0 0 0 12 12 m 264 0 h 0 a 12 12 0 0 0 12 -12 v 0"/>
<g class="sequence">
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="59" y="339"/>
<text x="109" y="355">
Expression</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="169" y="339"/>
<text x="191" y="355">
&gt;&gt;=</text>
</g>
<a class="link" xlink:href="../expressions.html#railroad-Expression">
<g class="nonterminal">
<rect height="22" width="100" x="223" y="339"/>
<text x="273" y="355">
Expression</text>
</g>
</a>
<path d=" M 159 350 h 10"/>
<path d=" M 213 350 h 10"/>
</g>
</g>
<path d=" M 357 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5"/>
<path d=" M 25 53 h 10"/>
<path d=" M 347 53 h 10"/>
</g>
</g>
</svg>
</div>
</div>
<div class="rule" id="r-expr.compound-assign.intro"><a class="rule-link" href="#r-expr.compound-assign.intro" title="expr.compound-assign.intro"><span>[expr<wbr>.compound-assign<wbr>.intro]</span/></a>
</div>
<p><em>Compound assignment expressions</em> combine arithmetic and logical binary operators with assignment expressions.</p>
<p>For example:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x = 5;
x += 1;
assert!(x == 6);
<span class="boring">}</span></code></pre></pre>
<p>The syntax of compound assignment is a <a href="../expressions.html#mutability">mutable</a> <a href="../expressions.html#place-expressions-and-value-expressions">place expression</a>, the <em>assigned operand</em>, then one of the operators followed by an <code>=</code> as a single token (no whitespace), and then a <a href="../expressions.html#place-expressions-and-value-expressions">value expression</a>, the <em>modifying operand</em>.</p>
<div class="rule" id="r-expr.compound-assign.place"><a class="rule-link" href="#r-expr.compound-assign.place" title="expr.compound-assign.place"><span>[expr<wbr>.compound-assign<wbr>.place]</span/></a>
</div>
<p>Unlike other place operands, the assigned place operand must be a place expression.</p>
<div class="rule" id="r-expr.compound-assign.no-value"><a class="rule-link" href="#r-expr.compound-assign.no-value" title="expr.compound-assign.no-value"><span>[expr<wbr>.compound-assign<wbr>.no-value]</span/></a>
</div>
<p>Attempting to use a value expression is a compiler error rather than promoting it to a temporary.</p>
<div class="rule" id="r-expr.compound-assign.operand-order"><a class="rule-link" href="#r-expr.compound-assign.operand-order" title="expr.compound-assign.operand-order"><span>[expr<wbr>.compound-assign<wbr>.operand-order]</span/></a>
</div>
<p>Evaluation of compound assignment expressions depends on the types of the operands.</p>
<div class="rule" id="r-expr.compound-assign.primitives"><a class="rule-link" href="#r-expr.compound-assign.primitives" title="expr.compound-assign.primitives"><span>[expr<wbr>.compound-assign<wbr>.primitives]</span/></a>
</div>
<p>If the types of both operands are known, prior to monomorphization, to be primitive, the right hand side is evaluated first, the left hand side is evaluated next, and the place given by the evaluation of the left hand side is mutated by applying the operator to the values of both sides.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">use core::{num::Wrapping, ops::AddAssign};
</span><span class="boring">
</span>trait Equate {}
impl&lt;T&gt; Equate for (T, T) {}

fn f1(x: (u8,)) {
    let mut order = vec![];
    // The RHS is evaluated first as both operands are of primitive
    // type.
    { order.push(2); x }.0 += { order.push(1); x }.0;
    assert!(order.is_sorted());
}

fn f2(x: (Wrapping&lt;u8&gt;,)) {
    let mut order = vec![];
    // The LHS is evaluated first as `Wrapping&lt;_&gt;` is not a primitive
    // type.
    { order.push(1); x }.0 += { order.push(2); (0u8,) }.0;
    assert!(order.is_sorted());
}

fn f3&lt;T: AddAssign&lt;u8&gt; + Copy&gt;(x: (T,)) where (T, u8): Equate {
    let mut order = vec![];
    // The LHS is evaluated first as one of the operands is a generic
    // parameter, even though that generic parameter can be unified
    // with a primitive type due to the where clause bound.
    { order.push(1); x }.0 += { order.push(2); (0u8,) }.0;
    assert!(order.is_sorted());
}

fn main() {
    f1((0u8,));
    f2((Wrapping(0u8),));
    // We supply a primitive type as the generic argument, but this
    // does not affect the evaluation order in `f3` when
    // monomorphized.
    f3::&lt;u8&gt;((0u8,));
}</code></pre></pre>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>This is unusual. Elsewhere left to right evaluation is the norm.</p>
<p>See the <a href="https://github.com/rust-lang/rust/blob/1.58.0/src/test/ui/expr/compound-assignment/eval-order.rs">eval order test</a> for more examples.</p>
</blockquote>
</div>
<div class="rule" id="r-expr.compound-assign.trait"><a class="rule-link" href="#r-expr.compound-assign.trait" title="expr.compound-assign.trait"><span>[expr<wbr>.compound-assign<wbr>.trait]</span/></a>
</div>
<p>Otherwise, this expression is syntactic sugar for using the corresponding trait for the operator (see <a href="operator-expr.html#r-expr.arith-logic.behavior">expr.arith-logic.behavior</a>) and calling its method with the left hand side as the <a href="method-call-expr.html#r-expr.method.intro">receiver</a> and the right hand side as the next argument.</p>
<p>For example, the following two statements are equivalent:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::ops::AddAssign;
</span>fn f&lt;T: AddAssign + Copy&gt;(mut x: T, y: T) {
    x += y; // Statement 1.
    x.add_assign(y); // Statement 2.
}
<span class="boring">}</span></code></pre></pre>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>Surprisingly, desugaring this further to a fully qualified method call is not equivalent, as there is special borrow checker behavior when the mutable reference to the first operand is taken via <a href="method-call-expr.html#r-expr.method.candidate-receivers-refs">autoref</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::ops::AddAssign;
</span>fn f&lt;T: AddAssign + Copy&gt;(mut x: T) {
    // Here we used `x` as both the LHS and the RHS. Because the
    // mutable borrow of the LHS needed to call the trait method
    // is taken implicitly by autoref, this is OK.
    x += x; //~ OK
    x.add_assign(x); //~ OK
}
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust compile_fail E0503 edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::ops::AddAssign;
</span>fn f&lt;T: AddAssign + Copy&gt;(mut x: T) {
    // We can't desugar the above to the below, as once we take the
    // mutable borrow of `x` to pass the first argument, we can't
    // pass `x` by value in the second argument because the mutable
    // reference is still live.
    &lt;T as AddAssign&gt;::add_assign(&amp;mut x, x);
    //~^ ERROR cannot use `x` because it was mutably borrowed
}
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust compile_fail E0503 edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::ops::AddAssign;
</span>fn f&lt;T: AddAssign + Copy&gt;(mut x: T) {
    // As above.
    (&amp;mut x).add_assign(x);
    //~^ ERROR cannot use `x` because it was mutably borrowed
}
<span class="boring">}</span></code></pre></pre>
</blockquote>
</div>
<div class="rule" id="r-expr.compound-assign.result"><a class="rule-link" href="#r-expr.compound-assign.result" title="expr.compound-assign.result"><span>[expr<wbr>.compound-assign<wbr>.result]</span/></a>
</div>
<p>As with normal assignment expressions, compound assignment expressions always produce <a href="../types/tuple.html">the unit value</a>.</p>
<div class="alert alert-warning">
<blockquote>
<p class="alert-title"><svg viewBox="0 0 16 16" width="18" height="18"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p>
<p>Avoid writing code that depends on the evaluation order of operands in compound assignments as it can be unusual and surprising.</p>
</blockquote>
</div>
<hr>
<ol class="footnote-definition"><li id="footnote-meta-compat">
<p>where <code>T</code> and <code>V</code> have compatible metadata:</p>
<ul>
<li><code>V: Sized</code>, or</li>
<li>Both slice metadata (<code>*[u16]</code> -&gt; <code>*[u8]</code>, <code>*str</code> -&gt; <code>*(u8, [u32])</code>), or</li>
<li>Both the same trait object metadata, modulo dropping auto traits (<code>*dyn Debug</code> -&gt; <code>*(u16, dyn Debug)</code>, <code>*dyn Debug + Send</code> -&gt; <code>*dyn Debug</code>)
<ul>
<li><strong>Note</strong>: <em>adding</em> auto traits is only allowed if the principal trait has the auto trait as a super trait (given <code>trait T: Send {}</code>, <code>*dyn T</code> -&gt; <code>*dyn T + Send</code> is valid, but <code>*dyn Debug</code> -&gt; <code>*dyn Debug + Send</code> is not)</li>
<li><strong>Note</strong>: Generics (including lifetimes) must match (<code>*dyn T&lt;'a, A&gt;</code> -&gt; <code>*dyn T&lt;'b, B&gt;</code> requires <code>'a = 'b</code> and <code>A = B</code>)</li>
</ul>
</li>
</ul>
 <a href="#fr-meta-compat-1">↩</a></li>
<li id="footnote-lessmut">
<p>only when <code>m₁</code> is <code>mut</code> or <code>m₂</code> is <code>const</code>. Casting <code>mut</code> reference/pointer to
<code>const</code> pointer is allowed. <a href="#fr-lessmut-1">↩</a> <a href="#fr-lessmut-2">↩2</a></p>
</li>
<li id="footnote-no-capture">
<p>only for closures that do not capture (close over) any local variables can be casted to function pointers. <a href="#fr-no-capture-1">↩</a></p>
</li>
</ol>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../expressions/block-expr.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../expressions/grouped-expr.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../expressions/block-expr.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../expressions/grouped-expr.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-9aeb6ddf.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-9576a2db.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/reference-cfed9ca5.js"></script>


        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const fragmentMap =
                    {"#slice-dst-pointer-to-pointer-cast":"operator-expr.html#pointer-to-pointer-cast","#the-question-mark-operator":"operator-expr.html#the-try-propagation-expression"}
                ;
                const target = fragmentMap[window.location.hash];
                if (target) {
                    let url = new URL(target, window.location.href);
                    window.location.replace(url.href);
                }
            });
        </script>

    </div>
    </body>
</html>
