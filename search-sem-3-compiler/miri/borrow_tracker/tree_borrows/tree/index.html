<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="In this file we handle the â€œTreeâ€ part of Tree Borrows, i.e. all tree traversal functions, optimizations to trim branches, and keeping track of the relative position of the access to each node being updated. This of course also includes the definition of the tree structure."><title>miri::borrow_tracker::tree_borrows::tree - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-0c9465bb72ad079c.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="miri" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-dev" data-channel="nightly" data-search-js="search-33e1eb393c958316.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-ffff35d1e1849984.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../miri/index.html">miri</a><span class="version">1.81.0-dev</span></h2></div><h2 class="location"><a href="#">Module tree</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section><h2><a href="../index.html">In miri::borrow_tracker::tree_borrows</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">miri</a>::<wbr><a href="../../index.html">borrow_tracker</a>::<wbr><a href="../index.html">tree_borrows</a>::<wbr><a class="mod" href="#">tree</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../../src/miri/borrow_tracker/tree_borrows/tree.rs.html#1-802">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>In this file we handle the â€œTreeâ€ part of Tree Borrows, i.e. all tree
traversal functions, optimizations to trim branches, and keeping track of
the relative position of the access to each node being updated. This of course
also includes the definition of the tree structure.</p>
<p>Functions here manipulate permissions but are oblivious to them: as
the internals of <code>Permission</code> are private, the update process is a black
box. All we need to know here are</p>
<ul>
<li>the fact that updates depend only on the old state, the status of protectors,
and the relative position of the access;</li>
<li>idempotency properties asserted in <code>perms.rs</code> (for optimizations)</li>
</ul>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ErrHandlerArgs.html" title="struct miri::borrow_tracker::tree_borrows::tree::ErrHandlerArgs">ErrHandlerArgs</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Data given to the error handler</div></li><li><div class="item-name"><a class="struct" href="struct.LocationState.html" title="struct miri::borrow_tracker::tree_borrows::tree::LocationState">LocationState</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Data for a single <em>location</em>.</div></li><li><div class="item-name"><a class="struct" href="struct.Node.html" title="struct miri::borrow_tracker::tree_borrows::tree::Node">Node</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">A node in the borrow tree. Each node is uniquely identified by a tag via
the <code>nodes</code> map of <code>Tree</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.NodeAppArgs.html" title="struct miri::borrow_tracker::tree_borrows::tree::NodeAppArgs">NodeAppArgs</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Data given to the transition function</div></li><li><div class="item-name"><a class="struct" href="struct.Tree.html" title="struct miri::borrow_tracker::tree_borrows::tree::Tree">Tree</a></div><div class="desc docblock-short">Tree structure with both parents and children since we want to be
able to traverse the tree efficiently in both directions.</div></li><li><div class="item-name"><a class="struct" href="struct.TreeVisitor.html" title="struct miri::borrow_tracker::tree_borrows::tree::TreeVisitor">TreeVisitor</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Internal contents of <code>Tree</code> with the minimum of mutable access for
the purposes of the tree traversal functions: the permissions (<code>perms</code>) can be
updated but not the tree structure (<code>tag_mapping</code> and <code>nodes</code>)</div></li><li><div class="item-name"><a class="struct" href="struct.TreeVisitorStack.html" title="struct miri::borrow_tracker::tree_borrows::tree::TreeVisitorStack">TreeVisitorStack</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Stack of nodes left to explore in a tree traversal.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AccessRelatedness.html" title="enum miri::borrow_tracker::tree_borrows::tree::AccessRelatedness">AccessRelatedness</a></div><div class="desc docblock-short">Relative position of the access</div></li><li><div class="item-name"><a class="enum" href="enum.ContinueTraversal.html" title="enum miri::borrow_tracker::tree_borrows::tree::ContinueTraversal">ContinueTraversal</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Whether to continue exploring the children recursively or not.</div></li></ul></section></div></main></body></html>